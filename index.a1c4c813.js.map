{"mappings":"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","sources":["./node_modules/@parcel/runtime-browser-hmr/lib/HMRRuntime.js","./node_modules/@parcel/scope-hoisting/lib/helpers.js","./node_modules/dat.gui/build/dat.gui.module.js","./node_modules/rgbquant/src/rgbquant.js","./src/brush.ts","./src/index.ts","./src/comparator.ts"],"sourcesContent":[null,"var $parcel$global =\n  typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n    ? self\n    : typeof window !== 'undefined'\n    ? window\n    : typeof global !== 'undefined'\n    ? global\n    : {};\n\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\nfunction $parcel$defineInteropFlag(a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n}\n\nfunction $parcel$export(e, n, v) {\n  Object.defineProperty(e, n, {get: v, enumerable: true});\n}\n\nfunction $parcel$exportWildcard(dest, source) {\n  Object.keys(source).forEach(function(key) {\n    if (key === 'default' || key === '__esModule') {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function get() {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n}\n\nfunction $parcel$missingModule(name) {\n  var err = new Error(\"Cannot find module '\" + name + \"'\");\n  err.code = 'MODULE_NOT_FOUND';\n  throw err;\n}\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction ___$insertStyle(css) {\n  if (!css) {\n    return;\n  }\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  var style = document.createElement('style');\n\n  style.setAttribute('type', 'text/css');\n  style.innerHTML = css;\n  document.head.appendChild(style);\n\n  return css;\n}\n\nfunction colorToString (color, forceCSSHex) {\n  var colorFormat = color.__state.conversionName.toString();\n  var r = Math.round(color.r);\n  var g = Math.round(color.g);\n  var b = Math.round(color.b);\n  var a = color.a;\n  var h = Math.round(color.h);\n  var s = color.s.toFixed(1);\n  var v = color.v.toFixed(1);\n  if (forceCSSHex || colorFormat === 'THREE_CHAR_HEX' || colorFormat === 'SIX_CHAR_HEX') {\n    var str = color.hex.toString(16);\n    while (str.length < 6) {\n      str = '0' + str;\n    }\n    return '#' + str;\n  } else if (colorFormat === 'CSS_RGB') {\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\n  } else if (colorFormat === 'CSS_RGBA') {\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n  } else if (colorFormat === 'HEX') {\n    return '0x' + color.hex.toString(16);\n  } else if (colorFormat === 'RGB_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ']';\n  } else if (colorFormat === 'RGBA_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ',' + a + ']';\n  } else if (colorFormat === 'RGB_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + '}';\n  } else if (colorFormat === 'RGBA_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + ',a:' + a + '}';\n  } else if (colorFormat === 'HSV_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + '}';\n  } else if (colorFormat === 'HSVA_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + ',a:' + a + '}';\n  }\n  return 'unknown format';\n}\n\nvar ARR_EACH = Array.prototype.forEach;\nvar ARR_SLICE = Array.prototype.slice;\nvar Common = {\n  BREAK: {},\n  extend: function extend(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function (obj) {\n      var keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function (key) {\n        if (!this.isUndefined(obj[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n    return target;\n  },\n  defaults: function defaults(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function (obj) {\n      var keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function (key) {\n        if (this.isUndefined(target[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n    return target;\n  },\n  compose: function compose() {\n    var toCall = ARR_SLICE.call(arguments);\n    return function () {\n      var args = ARR_SLICE.call(arguments);\n      for (var i = toCall.length - 1; i >= 0; i--) {\n        args = [toCall[i].apply(this, args)];\n      }\n      return args[0];\n    };\n  },\n  each: function each(obj, itr, scope) {\n    if (!obj) {\n      return;\n    }\n    if (ARR_EACH && obj.forEach && obj.forEach === ARR_EACH) {\n      obj.forEach(itr, scope);\n    } else if (obj.length === obj.length + 0) {\n      var key = void 0;\n      var l = void 0;\n      for (key = 0, l = obj.length; key < l; key++) {\n        if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) {\n          return;\n        }\n      }\n    } else {\n      for (var _key in obj) {\n        if (itr.call(scope, obj[_key], _key) === this.BREAK) {\n          return;\n        }\n      }\n    }\n  },\n  defer: function defer(fnc) {\n    setTimeout(fnc, 0);\n  },\n  debounce: function debounce(func, threshold, callImmediately) {\n    var timeout = void 0;\n    return function () {\n      var obj = this;\n      var args = arguments;\n      function delayed() {\n        timeout = null;\n        if (!callImmediately) func.apply(obj, args);\n      }\n      var callNow = callImmediately || !timeout;\n      clearTimeout(timeout);\n      timeout = setTimeout(delayed, threshold);\n      if (callNow) {\n        func.apply(obj, args);\n      }\n    };\n  },\n  toArray: function toArray(obj) {\n    if (obj.toArray) return obj.toArray();\n    return ARR_SLICE.call(obj);\n  },\n  isUndefined: function isUndefined(obj) {\n    return obj === undefined;\n  },\n  isNull: function isNull(obj) {\n    return obj === null;\n  },\n  isNaN: function (_isNaN) {\n    function isNaN(_x) {\n      return _isNaN.apply(this, arguments);\n    }\n    isNaN.toString = function () {\n      return _isNaN.toString();\n    };\n    return isNaN;\n  }(function (obj) {\n    return isNaN(obj);\n  }),\n  isArray: Array.isArray || function (obj) {\n    return obj.constructor === Array;\n  },\n  isObject: function isObject(obj) {\n    return obj === Object(obj);\n  },\n  isNumber: function isNumber(obj) {\n    return obj === obj + 0;\n  },\n  isString: function isString(obj) {\n    return obj === obj + '';\n  },\n  isBoolean: function isBoolean(obj) {\n    return obj === false || obj === true;\n  },\n  isFunction: function isFunction(obj) {\n    return obj instanceof Function;\n  }\n};\n\nvar INTERPRETATIONS = [\n{\n  litmus: Common.isString,\n  conversions: {\n    THREE_CHAR_HEX: {\n      read: function read(original) {\n        var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'HEX',\n          hex: parseInt('0x' + test[1].toString() + test[1].toString() + test[2].toString() + test[2].toString() + test[3].toString() + test[3].toString(), 0)\n        };\n      },\n      write: colorToString\n    },\n    SIX_CHAR_HEX: {\n      read: function read(original) {\n        var test = original.match(/^#([A-F0-9]{6})$/i);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'HEX',\n          hex: parseInt('0x' + test[1].toString(), 0)\n        };\n      },\n      write: colorToString\n    },\n    CSS_RGB: {\n      read: function read(original) {\n        var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'RGB',\n          r: parseFloat(test[1]),\n          g: parseFloat(test[2]),\n          b: parseFloat(test[3])\n        };\n      },\n      write: colorToString\n    },\n    CSS_RGBA: {\n      read: function read(original) {\n        var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'RGB',\n          r: parseFloat(test[1]),\n          g: parseFloat(test[2]),\n          b: parseFloat(test[3]),\n          a: parseFloat(test[4])\n        };\n      },\n      write: colorToString\n    }\n  }\n},\n{\n  litmus: Common.isNumber,\n  conversions: {\n    HEX: {\n      read: function read(original) {\n        return {\n          space: 'HEX',\n          hex: original,\n          conversionName: 'HEX'\n        };\n      },\n      write: function write(color) {\n        return color.hex;\n      }\n    }\n  }\n},\n{\n  litmus: Common.isArray,\n  conversions: {\n    RGB_ARRAY: {\n      read: function read(original) {\n        if (original.length !== 3) {\n          return false;\n        }\n        return {\n          space: 'RGB',\n          r: original[0],\n          g: original[1],\n          b: original[2]\n        };\n      },\n      write: function write(color) {\n        return [color.r, color.g, color.b];\n      }\n    },\n    RGBA_ARRAY: {\n      read: function read(original) {\n        if (original.length !== 4) return false;\n        return {\n          space: 'RGB',\n          r: original[0],\n          g: original[1],\n          b: original[2],\n          a: original[3]\n        };\n      },\n      write: function write(color) {\n        return [color.r, color.g, color.b, color.a];\n      }\n    }\n  }\n},\n{\n  litmus: Common.isObject,\n  conversions: {\n    RGBA_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.r) && Common.isNumber(original.g) && Common.isNumber(original.b) && Common.isNumber(original.a)) {\n          return {\n            space: 'RGB',\n            r: original.r,\n            g: original.g,\n            b: original.b,\n            a: original.a\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          r: color.r,\n          g: color.g,\n          b: color.b,\n          a: color.a\n        };\n      }\n    },\n    RGB_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.r) && Common.isNumber(original.g) && Common.isNumber(original.b)) {\n          return {\n            space: 'RGB',\n            r: original.r,\n            g: original.g,\n            b: original.b\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          r: color.r,\n          g: color.g,\n          b: color.b\n        };\n      }\n    },\n    HSVA_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.h) && Common.isNumber(original.s) && Common.isNumber(original.v) && Common.isNumber(original.a)) {\n          return {\n            space: 'HSV',\n            h: original.h,\n            s: original.s,\n            v: original.v,\n            a: original.a\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          h: color.h,\n          s: color.s,\n          v: color.v,\n          a: color.a\n        };\n      }\n    },\n    HSV_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.h) && Common.isNumber(original.s) && Common.isNumber(original.v)) {\n          return {\n            space: 'HSV',\n            h: original.h,\n            s: original.s,\n            v: original.v\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          h: color.h,\n          s: color.s,\n          v: color.v\n        };\n      }\n    }\n  }\n}];\nvar result = void 0;\nvar toReturn = void 0;\nvar interpret = function interpret() {\n  toReturn = false;\n  var original = arguments.length > 1 ? Common.toArray(arguments) : arguments[0];\n  Common.each(INTERPRETATIONS, function (family) {\n    if (family.litmus(original)) {\n      Common.each(family.conversions, function (conversion, conversionName) {\n        result = conversion.read(original);\n        if (toReturn === false && result !== false) {\n          toReturn = result;\n          result.conversionName = conversionName;\n          result.conversion = conversion;\n          return Common.BREAK;\n        }\n      });\n      return Common.BREAK;\n    }\n  });\n  return toReturn;\n};\n\nvar tmpComponent = void 0;\nvar ColorMath = {\n  hsv_to_rgb: function hsv_to_rgb(h, s, v) {\n    var hi = Math.floor(h / 60) % 6;\n    var f = h / 60 - Math.floor(h / 60);\n    var p = v * (1.0 - s);\n    var q = v * (1.0 - f * s);\n    var t = v * (1.0 - (1.0 - f) * s);\n    var c = [[v, t, p], [q, v, p], [p, v, t], [p, q, v], [t, p, v], [v, p, q]][hi];\n    return {\n      r: c[0] * 255,\n      g: c[1] * 255,\n      b: c[2] * 255\n    };\n  },\n  rgb_to_hsv: function rgb_to_hsv(r, g, b) {\n    var min = Math.min(r, g, b);\n    var max = Math.max(r, g, b);\n    var delta = max - min;\n    var h = void 0;\n    var s = void 0;\n    if (max !== 0) {\n      s = delta / max;\n    } else {\n      return {\n        h: NaN,\n        s: 0,\n        v: 0\n      };\n    }\n    if (r === max) {\n      h = (g - b) / delta;\n    } else if (g === max) {\n      h = 2 + (b - r) / delta;\n    } else {\n      h = 4 + (r - g) / delta;\n    }\n    h /= 6;\n    if (h < 0) {\n      h += 1;\n    }\n    return {\n      h: h * 360,\n      s: s,\n      v: max / 255\n    };\n  },\n  rgb_to_hex: function rgb_to_hex(r, g, b) {\n    var hex = this.hex_with_component(0, 2, r);\n    hex = this.hex_with_component(hex, 1, g);\n    hex = this.hex_with_component(hex, 0, b);\n    return hex;\n  },\n  component_from_hex: function component_from_hex(hex, componentIndex) {\n    return hex >> componentIndex * 8 & 0xFF;\n  },\n  hex_with_component: function hex_with_component(hex, componentIndex, value) {\n    return value << (tmpComponent = componentIndex * 8) | hex & ~(0xFF << tmpComponent);\n  }\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar Color = function () {\n  function Color() {\n    classCallCheck(this, Color);\n    this.__state = interpret.apply(this, arguments);\n    if (this.__state === false) {\n      throw new Error('Failed to interpret color arguments');\n    }\n    this.__state.a = this.__state.a || 1;\n  }\n  createClass(Color, [{\n    key: 'toString',\n    value: function toString() {\n      return colorToString(this);\n    }\n  }, {\n    key: 'toHexString',\n    value: function toHexString() {\n      return colorToString(this, true);\n    }\n  }, {\n    key: 'toOriginal',\n    value: function toOriginal() {\n      return this.__state.conversion.write(this);\n    }\n  }]);\n  return Color;\n}();\nfunction defineRGBComponent(target, component, componentHexIndex) {\n  Object.defineProperty(target, component, {\n    get: function get$$1() {\n      if (this.__state.space === 'RGB') {\n        return this.__state[component];\n      }\n      Color.recalculateRGB(this, component, componentHexIndex);\n      return this.__state[component];\n    },\n    set: function set$$1(v) {\n      if (this.__state.space !== 'RGB') {\n        Color.recalculateRGB(this, component, componentHexIndex);\n        this.__state.space = 'RGB';\n      }\n      this.__state[component] = v;\n    }\n  });\n}\nfunction defineHSVComponent(target, component) {\n  Object.defineProperty(target, component, {\n    get: function get$$1() {\n      if (this.__state.space === 'HSV') {\n        return this.__state[component];\n      }\n      Color.recalculateHSV(this);\n      return this.__state[component];\n    },\n    set: function set$$1(v) {\n      if (this.__state.space !== 'HSV') {\n        Color.recalculateHSV(this);\n        this.__state.space = 'HSV';\n      }\n      this.__state[component] = v;\n    }\n  });\n}\nColor.recalculateRGB = function (color, component, componentHexIndex) {\n  if (color.__state.space === 'HEX') {\n    color.__state[component] = ColorMath.component_from_hex(color.__state.hex, componentHexIndex);\n  } else if (color.__state.space === 'HSV') {\n    Common.extend(color.__state, ColorMath.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n  } else {\n    throw new Error('Corrupted color state');\n  }\n};\nColor.recalculateHSV = function (color) {\n  var result = ColorMath.rgb_to_hsv(color.r, color.g, color.b);\n  Common.extend(color.__state, {\n    s: result.s,\n    v: result.v\n  });\n  if (!Common.isNaN(result.h)) {\n    color.__state.h = result.h;\n  } else if (Common.isUndefined(color.__state.h)) {\n    color.__state.h = 0;\n  }\n};\nColor.COMPONENTS = ['r', 'g', 'b', 'h', 's', 'v', 'hex', 'a'];\ndefineRGBComponent(Color.prototype, 'r', 2);\ndefineRGBComponent(Color.prototype, 'g', 1);\ndefineRGBComponent(Color.prototype, 'b', 0);\ndefineHSVComponent(Color.prototype, 'h');\ndefineHSVComponent(Color.prototype, 's');\ndefineHSVComponent(Color.prototype, 'v');\nObject.defineProperty(Color.prototype, 'a', {\n  get: function get$$1() {\n    return this.__state.a;\n  },\n  set: function set$$1(v) {\n    this.__state.a = v;\n  }\n});\nObject.defineProperty(Color.prototype, 'hex', {\n  get: function get$$1() {\n    if (this.__state.space !== 'HEX') {\n      this.__state.hex = ColorMath.rgb_to_hex(this.r, this.g, this.b);\n      this.__state.space = 'HEX';\n    }\n    return this.__state.hex;\n  },\n  set: function set$$1(v) {\n    this.__state.space = 'HEX';\n    this.__state.hex = v;\n  }\n});\n\nvar Controller = function () {\n  function Controller(object, property) {\n    classCallCheck(this, Controller);\n    this.initialValue = object[property];\n    this.domElement = document.createElement('div');\n    this.object = object;\n    this.property = property;\n    this.__onChange = undefined;\n    this.__onFinishChange = undefined;\n  }\n  createClass(Controller, [{\n    key: 'onChange',\n    value: function onChange(fnc) {\n      this.__onChange = fnc;\n      return this;\n    }\n  }, {\n    key: 'onFinishChange',\n    value: function onFinishChange(fnc) {\n      this.__onFinishChange = fnc;\n      return this;\n    }\n  }, {\n    key: 'setValue',\n    value: function setValue(newValue) {\n      this.object[this.property] = newValue;\n      if (this.__onChange) {\n        this.__onChange.call(this, newValue);\n      }\n      this.updateDisplay();\n      return this;\n    }\n  }, {\n    key: 'getValue',\n    value: function getValue() {\n      return this.object[this.property];\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      return this;\n    }\n  }, {\n    key: 'isModified',\n    value: function isModified() {\n      return this.initialValue !== this.getValue();\n    }\n  }]);\n  return Controller;\n}();\n\nvar EVENT_MAP = {\n  HTMLEvents: ['change'],\n  MouseEvents: ['click', 'mousemove', 'mousedown', 'mouseup', 'mouseover'],\n  KeyboardEvents: ['keydown']\n};\nvar EVENT_MAP_INV = {};\nCommon.each(EVENT_MAP, function (v, k) {\n  Common.each(v, function (e) {\n    EVENT_MAP_INV[e] = k;\n  });\n});\nvar CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\nfunction cssValueToPixels(val) {\n  if (val === '0' || Common.isUndefined(val)) {\n    return 0;\n  }\n  var match = val.match(CSS_VALUE_PIXELS);\n  if (!Common.isNull(match)) {\n    return parseFloat(match[1]);\n  }\n  return 0;\n}\nvar dom = {\n  makeSelectable: function makeSelectable(elem, selectable) {\n    if (elem === undefined || elem.style === undefined) return;\n    elem.onselectstart = selectable ? function () {\n      return false;\n    } : function () {};\n    elem.style.MozUserSelect = selectable ? 'auto' : 'none';\n    elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n    elem.unselectable = selectable ? 'on' : 'off';\n  },\n  makeFullscreen: function makeFullscreen(elem, hor, vert) {\n    var vertical = vert;\n    var horizontal = hor;\n    if (Common.isUndefined(horizontal)) {\n      horizontal = true;\n    }\n    if (Common.isUndefined(vertical)) {\n      vertical = true;\n    }\n    elem.style.position = 'absolute';\n    if (horizontal) {\n      elem.style.left = 0;\n      elem.style.right = 0;\n    }\n    if (vertical) {\n      elem.style.top = 0;\n      elem.style.bottom = 0;\n    }\n  },\n  fakeEvent: function fakeEvent(elem, eventType, pars, aux) {\n    var params = pars || {};\n    var className = EVENT_MAP_INV[eventType];\n    if (!className) {\n      throw new Error('Event type ' + eventType + ' not supported.');\n    }\n    var evt = document.createEvent(className);\n    switch (className) {\n      case 'MouseEvents':\n        {\n          var clientX = params.x || params.clientX || 0;\n          var clientY = params.y || params.clientY || 0;\n          evt.initMouseEvent(eventType, params.bubbles || false, params.cancelable || true, window, params.clickCount || 1, 0,\n          0,\n          clientX,\n          clientY,\n          false, false, false, false, 0, null);\n          break;\n        }\n      case 'KeyboardEvents':\n        {\n          var init = evt.initKeyboardEvent || evt.initKeyEvent;\n          Common.defaults(params, {\n            cancelable: true,\n            ctrlKey: false,\n            altKey: false,\n            shiftKey: false,\n            metaKey: false,\n            keyCode: undefined,\n            charCode: undefined\n          });\n          init(eventType, params.bubbles || false, params.cancelable, window, params.ctrlKey, params.altKey, params.shiftKey, params.metaKey, params.keyCode, params.charCode);\n          break;\n        }\n      default:\n        {\n          evt.initEvent(eventType, params.bubbles || false, params.cancelable || true);\n          break;\n        }\n    }\n    Common.defaults(evt, aux);\n    elem.dispatchEvent(evt);\n  },\n  bind: function bind(elem, event, func, newBool) {\n    var bool = newBool || false;\n    if (elem.addEventListener) {\n      elem.addEventListener(event, func, bool);\n    } else if (elem.attachEvent) {\n      elem.attachEvent('on' + event, func);\n    }\n    return dom;\n  },\n  unbind: function unbind(elem, event, func, newBool) {\n    var bool = newBool || false;\n    if (elem.removeEventListener) {\n      elem.removeEventListener(event, func, bool);\n    } else if (elem.detachEvent) {\n      elem.detachEvent('on' + event, func);\n    }\n    return dom;\n  },\n  addClass: function addClass(elem, className) {\n    if (elem.className === undefined) {\n      elem.className = className;\n    } else if (elem.className !== className) {\n      var classes = elem.className.split(/ +/);\n      if (classes.indexOf(className) === -1) {\n        classes.push(className);\n        elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\n      }\n    }\n    return dom;\n  },\n  removeClass: function removeClass(elem, className) {\n    if (className) {\n      if (elem.className === className) {\n        elem.removeAttribute('class');\n      } else {\n        var classes = elem.className.split(/ +/);\n        var index = classes.indexOf(className);\n        if (index !== -1) {\n          classes.splice(index, 1);\n          elem.className = classes.join(' ');\n        }\n      }\n    } else {\n      elem.className = undefined;\n    }\n    return dom;\n  },\n  hasClass: function hasClass(elem, className) {\n    return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\n  },\n  getWidth: function getWidth(elem) {\n    var style = getComputedStyle(elem);\n    return cssValueToPixels(style['border-left-width']) + cssValueToPixels(style['border-right-width']) + cssValueToPixels(style['padding-left']) + cssValueToPixels(style['padding-right']) + cssValueToPixels(style.width);\n  },\n  getHeight: function getHeight(elem) {\n    var style = getComputedStyle(elem);\n    return cssValueToPixels(style['border-top-width']) + cssValueToPixels(style['border-bottom-width']) + cssValueToPixels(style['padding-top']) + cssValueToPixels(style['padding-bottom']) + cssValueToPixels(style.height);\n  },\n  getOffset: function getOffset(el) {\n    var elem = el;\n    var offset = { left: 0, top: 0 };\n    if (elem.offsetParent) {\n      do {\n        offset.left += elem.offsetLeft;\n        offset.top += elem.offsetTop;\n        elem = elem.offsetParent;\n      } while (elem);\n    }\n    return offset;\n  },\n  isActive: function isActive(elem) {\n    return elem === document.activeElement && (elem.type || elem.href);\n  }\n};\n\nvar BooleanController = function (_Controller) {\n  inherits(BooleanController, _Controller);\n  function BooleanController(object, property) {\n    classCallCheck(this, BooleanController);\n    var _this2 = possibleConstructorReturn(this, (BooleanController.__proto__ || Object.getPrototypeOf(BooleanController)).call(this, object, property));\n    var _this = _this2;\n    _this2.__prev = _this2.getValue();\n    _this2.__checkbox = document.createElement('input');\n    _this2.__checkbox.setAttribute('type', 'checkbox');\n    function onChange() {\n      _this.setValue(!_this.__prev);\n    }\n    dom.bind(_this2.__checkbox, 'change', onChange, false);\n    _this2.domElement.appendChild(_this2.__checkbox);\n    _this2.updateDisplay();\n    return _this2;\n  }\n  createClass(BooleanController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var toReturn = get(BooleanController.prototype.__proto__ || Object.getPrototypeOf(BooleanController.prototype), 'setValue', this).call(this, v);\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n      this.__prev = this.getValue();\n      return toReturn;\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (this.getValue() === true) {\n        this.__checkbox.setAttribute('checked', 'checked');\n        this.__checkbox.checked = true;\n        this.__prev = true;\n      } else {\n        this.__checkbox.checked = false;\n        this.__prev = false;\n      }\n      return get(BooleanController.prototype.__proto__ || Object.getPrototypeOf(BooleanController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return BooleanController;\n}(Controller);\n\nvar OptionController = function (_Controller) {\n  inherits(OptionController, _Controller);\n  function OptionController(object, property, opts) {\n    classCallCheck(this, OptionController);\n    var _this2 = possibleConstructorReturn(this, (OptionController.__proto__ || Object.getPrototypeOf(OptionController)).call(this, object, property));\n    var options = opts;\n    var _this = _this2;\n    _this2.__select = document.createElement('select');\n    if (Common.isArray(options)) {\n      var map = {};\n      Common.each(options, function (element) {\n        map[element] = element;\n      });\n      options = map;\n    }\n    Common.each(options, function (value, key) {\n      var opt = document.createElement('option');\n      opt.innerHTML = key;\n      opt.setAttribute('value', value);\n      _this.__select.appendChild(opt);\n    });\n    _this2.updateDisplay();\n    dom.bind(_this2.__select, 'change', function () {\n      var desiredValue = this.options[this.selectedIndex].value;\n      _this.setValue(desiredValue);\n    });\n    _this2.domElement.appendChild(_this2.__select);\n    return _this2;\n  }\n  createClass(OptionController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var toReturn = get(OptionController.prototype.__proto__ || Object.getPrototypeOf(OptionController.prototype), 'setValue', this).call(this, v);\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n      return toReturn;\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (dom.isActive(this.__select)) return this;\n      this.__select.value = this.getValue();\n      return get(OptionController.prototype.__proto__ || Object.getPrototypeOf(OptionController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return OptionController;\n}(Controller);\n\nvar StringController = function (_Controller) {\n  inherits(StringController, _Controller);\n  function StringController(object, property) {\n    classCallCheck(this, StringController);\n    var _this2 = possibleConstructorReturn(this, (StringController.__proto__ || Object.getPrototypeOf(StringController)).call(this, object, property));\n    var _this = _this2;\n    function onChange() {\n      _this.setValue(_this.__input.value);\n    }\n    function onBlur() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    _this2.__input = document.createElement('input');\n    _this2.__input.setAttribute('type', 'text');\n    dom.bind(_this2.__input, 'keyup', onChange);\n    dom.bind(_this2.__input, 'change', onChange);\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        this.blur();\n      }\n    });\n    _this2.updateDisplay();\n    _this2.domElement.appendChild(_this2.__input);\n    return _this2;\n  }\n  createClass(StringController, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (!dom.isActive(this.__input)) {\n        this.__input.value = this.getValue();\n      }\n      return get(StringController.prototype.__proto__ || Object.getPrototypeOf(StringController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return StringController;\n}(Controller);\n\nfunction numDecimals(x) {\n  var _x = x.toString();\n  if (_x.indexOf('.') > -1) {\n    return _x.length - _x.indexOf('.') - 1;\n  }\n  return 0;\n}\nvar NumberController = function (_Controller) {\n  inherits(NumberController, _Controller);\n  function NumberController(object, property, params) {\n    classCallCheck(this, NumberController);\n    var _this = possibleConstructorReturn(this, (NumberController.__proto__ || Object.getPrototypeOf(NumberController)).call(this, object, property));\n    var _params = params || {};\n    _this.__min = _params.min;\n    _this.__max = _params.max;\n    _this.__step = _params.step;\n    if (Common.isUndefined(_this.__step)) {\n      if (_this.initialValue === 0) {\n        _this.__impliedStep = 1;\n      } else {\n        _this.__impliedStep = Math.pow(10, Math.floor(Math.log(Math.abs(_this.initialValue)) / Math.LN10)) / 10;\n      }\n    } else {\n      _this.__impliedStep = _this.__step;\n    }\n    _this.__precision = numDecimals(_this.__impliedStep);\n    return _this;\n  }\n  createClass(NumberController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var _v = v;\n      if (this.__min !== undefined && _v < this.__min) {\n        _v = this.__min;\n      } else if (this.__max !== undefined && _v > this.__max) {\n        _v = this.__max;\n      }\n      if (this.__step !== undefined && _v % this.__step !== 0) {\n        _v = Math.round(_v / this.__step) * this.__step;\n      }\n      return get(NumberController.prototype.__proto__ || Object.getPrototypeOf(NumberController.prototype), 'setValue', this).call(this, _v);\n    }\n  }, {\n    key: 'min',\n    value: function min(minValue) {\n      this.__min = minValue;\n      return this;\n    }\n  }, {\n    key: 'max',\n    value: function max(maxValue) {\n      this.__max = maxValue;\n      return this;\n    }\n  }, {\n    key: 'step',\n    value: function step(stepValue) {\n      this.__step = stepValue;\n      this.__impliedStep = stepValue;\n      this.__precision = numDecimals(stepValue);\n      return this;\n    }\n  }]);\n  return NumberController;\n}(Controller);\n\nfunction roundToDecimal(value, decimals) {\n  var tenTo = Math.pow(10, decimals);\n  return Math.round(value * tenTo) / tenTo;\n}\nvar NumberControllerBox = function (_NumberController) {\n  inherits(NumberControllerBox, _NumberController);\n  function NumberControllerBox(object, property, params) {\n    classCallCheck(this, NumberControllerBox);\n    var _this2 = possibleConstructorReturn(this, (NumberControllerBox.__proto__ || Object.getPrototypeOf(NumberControllerBox)).call(this, object, property, params));\n    _this2.__truncationSuspended = false;\n    var _this = _this2;\n    var prevY = void 0;\n    function onChange() {\n      var attempted = parseFloat(_this.__input.value);\n      if (!Common.isNaN(attempted)) {\n        _this.setValue(attempted);\n      }\n    }\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    function onBlur() {\n      onFinish();\n    }\n    function onMouseDrag(e) {\n      var diff = prevY - e.clientY;\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\n      prevY = e.clientY;\n    }\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      onFinish();\n    }\n    function onMouseDown(e) {\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      prevY = e.clientY;\n    }\n    _this2.__input = document.createElement('input');\n    _this2.__input.setAttribute('type', 'text');\n    dom.bind(_this2.__input, 'change', onChange);\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__input, 'mousedown', onMouseDown);\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        _this.__truncationSuspended = true;\n        this.blur();\n        _this.__truncationSuspended = false;\n        onFinish();\n      }\n    });\n    _this2.updateDisplay();\n    _this2.domElement.appendChild(_this2.__input);\n    return _this2;\n  }\n  createClass(NumberControllerBox, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\n      return get(NumberControllerBox.prototype.__proto__ || Object.getPrototypeOf(NumberControllerBox.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return NumberControllerBox;\n}(NumberController);\n\nfunction map(v, i1, i2, o1, o2) {\n  return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\n}\nvar NumberControllerSlider = function (_NumberController) {\n  inherits(NumberControllerSlider, _NumberController);\n  function NumberControllerSlider(object, property, min, max, step) {\n    classCallCheck(this, NumberControllerSlider);\n    var _this2 = possibleConstructorReturn(this, (NumberControllerSlider.__proto__ || Object.getPrototypeOf(NumberControllerSlider)).call(this, object, property, { min: min, max: max, step: step }));\n    var _this = _this2;\n    _this2.__background = document.createElement('div');\n    _this2.__foreground = document.createElement('div');\n    dom.bind(_this2.__background, 'mousedown', onMouseDown);\n    dom.bind(_this2.__background, 'touchstart', onTouchStart);\n    dom.addClass(_this2.__background, 'slider');\n    dom.addClass(_this2.__foreground, 'slider-fg');\n    function onMouseDown(e) {\n      document.activeElement.blur();\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      onMouseDrag(e);\n    }\n    function onMouseDrag(e) {\n      e.preventDefault();\n      var bgRect = _this.__background.getBoundingClientRect();\n      _this.setValue(map(e.clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\n      return false;\n    }\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    function onTouchStart(e) {\n      if (e.touches.length !== 1) {\n        return;\n      }\n      dom.bind(window, 'touchmove', onTouchMove);\n      dom.bind(window, 'touchend', onTouchEnd);\n      onTouchMove(e);\n    }\n    function onTouchMove(e) {\n      var clientX = e.touches[0].clientX;\n      var bgRect = _this.__background.getBoundingClientRect();\n      _this.setValue(map(clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\n    }\n    function onTouchEnd() {\n      dom.unbind(window, 'touchmove', onTouchMove);\n      dom.unbind(window, 'touchend', onTouchEnd);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    _this2.updateDisplay();\n    _this2.__background.appendChild(_this2.__foreground);\n    _this2.domElement.appendChild(_this2.__background);\n    return _this2;\n  }\n  createClass(NumberControllerSlider, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      var pct = (this.getValue() - this.__min) / (this.__max - this.__min);\n      this.__foreground.style.width = pct * 100 + '%';\n      return get(NumberControllerSlider.prototype.__proto__ || Object.getPrototypeOf(NumberControllerSlider.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return NumberControllerSlider;\n}(NumberController);\n\nvar FunctionController = function (_Controller) {\n  inherits(FunctionController, _Controller);\n  function FunctionController(object, property, text) {\n    classCallCheck(this, FunctionController);\n    var _this2 = possibleConstructorReturn(this, (FunctionController.__proto__ || Object.getPrototypeOf(FunctionController)).call(this, object, property));\n    var _this = _this2;\n    _this2.__button = document.createElement('div');\n    _this2.__button.innerHTML = text === undefined ? 'Fire' : text;\n    dom.bind(_this2.__button, 'click', function (e) {\n      e.preventDefault();\n      _this.fire();\n      return false;\n    });\n    dom.addClass(_this2.__button, 'button');\n    _this2.domElement.appendChild(_this2.__button);\n    return _this2;\n  }\n  createClass(FunctionController, [{\n    key: 'fire',\n    value: function fire() {\n      if (this.__onChange) {\n        this.__onChange.call(this);\n      }\n      this.getValue().call(this.object);\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n    }\n  }]);\n  return FunctionController;\n}(Controller);\n\nvar ColorController = function (_Controller) {\n  inherits(ColorController, _Controller);\n  function ColorController(object, property) {\n    classCallCheck(this, ColorController);\n    var _this2 = possibleConstructorReturn(this, (ColorController.__proto__ || Object.getPrototypeOf(ColorController)).call(this, object, property));\n    _this2.__color = new Color(_this2.getValue());\n    _this2.__temp = new Color(0);\n    var _this = _this2;\n    _this2.domElement = document.createElement('div');\n    dom.makeSelectable(_this2.domElement, false);\n    _this2.__selector = document.createElement('div');\n    _this2.__selector.className = 'selector';\n    _this2.__saturation_field = document.createElement('div');\n    _this2.__saturation_field.className = 'saturation-field';\n    _this2.__field_knob = document.createElement('div');\n    _this2.__field_knob.className = 'field-knob';\n    _this2.__field_knob_border = '2px solid ';\n    _this2.__hue_knob = document.createElement('div');\n    _this2.__hue_knob.className = 'hue-knob';\n    _this2.__hue_field = document.createElement('div');\n    _this2.__hue_field.className = 'hue-field';\n    _this2.__input = document.createElement('input');\n    _this2.__input.type = 'text';\n    _this2.__input_textShadow = '0 1px 1px ';\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        onBlur.call(this);\n      }\n    });\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__selector, 'mousedown', function ()        {\n      dom.addClass(this, 'drag').bind(window, 'mouseup', function ()        {\n        dom.removeClass(_this.__selector, 'drag');\n      });\n    });\n    dom.bind(_this2.__selector, 'touchstart', function ()        {\n      dom.addClass(this, 'drag').bind(window, 'touchend', function ()        {\n        dom.removeClass(_this.__selector, 'drag');\n      });\n    });\n    var valueField = document.createElement('div');\n    Common.extend(_this2.__selector.style, {\n      width: '122px',\n      height: '102px',\n      padding: '3px',\n      backgroundColor: '#222',\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n    });\n    Common.extend(_this2.__field_knob.style, {\n      position: 'absolute',\n      width: '12px',\n      height: '12px',\n      border: _this2.__field_knob_border + (_this2.__color.v < 0.5 ? '#fff' : '#000'),\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n      borderRadius: '12px',\n      zIndex: 1\n    });\n    Common.extend(_this2.__hue_knob.style, {\n      position: 'absolute',\n      width: '15px',\n      height: '2px',\n      borderRight: '4px solid #fff',\n      zIndex: 1\n    });\n    Common.extend(_this2.__saturation_field.style, {\n      width: '100px',\n      height: '100px',\n      border: '1px solid #555',\n      marginRight: '3px',\n      display: 'inline-block',\n      cursor: 'pointer'\n    });\n    Common.extend(valueField.style, {\n      width: '100%',\n      height: '100%',\n      background: 'none'\n    });\n    linearGradient(valueField, 'top', 'rgba(0,0,0,0)', '#000');\n    Common.extend(_this2.__hue_field.style, {\n      width: '15px',\n      height: '100px',\n      border: '1px solid #555',\n      cursor: 'ns-resize',\n      position: 'absolute',\n      top: '3px',\n      right: '3px'\n    });\n    hueGradient(_this2.__hue_field);\n    Common.extend(_this2.__input.style, {\n      outline: 'none',\n      textAlign: 'center',\n      color: '#fff',\n      border: 0,\n      fontWeight: 'bold',\n      textShadow: _this2.__input_textShadow + 'rgba(0,0,0,0.7)'\n    });\n    dom.bind(_this2.__saturation_field, 'mousedown', fieldDown);\n    dom.bind(_this2.__saturation_field, 'touchstart', fieldDown);\n    dom.bind(_this2.__field_knob, 'mousedown', fieldDown);\n    dom.bind(_this2.__field_knob, 'touchstart', fieldDown);\n    dom.bind(_this2.__hue_field, 'mousedown', fieldDownH);\n    dom.bind(_this2.__hue_field, 'touchstart', fieldDownH);\n    function fieldDown(e) {\n      setSV(e);\n      dom.bind(window, 'mousemove', setSV);\n      dom.bind(window, 'touchmove', setSV);\n      dom.bind(window, 'mouseup', fieldUpSV);\n      dom.bind(window, 'touchend', fieldUpSV);\n    }\n    function fieldDownH(e) {\n      setH(e);\n      dom.bind(window, 'mousemove', setH);\n      dom.bind(window, 'touchmove', setH);\n      dom.bind(window, 'mouseup', fieldUpH);\n      dom.bind(window, 'touchend', fieldUpH);\n    }\n    function fieldUpSV() {\n      dom.unbind(window, 'mousemove', setSV);\n      dom.unbind(window, 'touchmove', setSV);\n      dom.unbind(window, 'mouseup', fieldUpSV);\n      dom.unbind(window, 'touchend', fieldUpSV);\n      onFinish();\n    }\n    function fieldUpH() {\n      dom.unbind(window, 'mousemove', setH);\n      dom.unbind(window, 'touchmove', setH);\n      dom.unbind(window, 'mouseup', fieldUpH);\n      dom.unbind(window, 'touchend', fieldUpH);\n      onFinish();\n    }\n    function onBlur() {\n      var i = interpret(this.value);\n      if (i !== false) {\n        _this.__color.__state = i;\n        _this.setValue(_this.__color.toOriginal());\n      } else {\n        this.value = _this.__color.toString();\n      }\n    }\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.__color.toOriginal());\n      }\n    }\n    _this2.__saturation_field.appendChild(valueField);\n    _this2.__selector.appendChild(_this2.__field_knob);\n    _this2.__selector.appendChild(_this2.__saturation_field);\n    _this2.__selector.appendChild(_this2.__hue_field);\n    _this2.__hue_field.appendChild(_this2.__hue_knob);\n    _this2.domElement.appendChild(_this2.__input);\n    _this2.domElement.appendChild(_this2.__selector);\n    _this2.updateDisplay();\n    function setSV(e) {\n      if (e.type.indexOf('touch') === -1) {\n        e.preventDefault();\n      }\n      var fieldRect = _this.__saturation_field.getBoundingClientRect();\n      var _ref = e.touches && e.touches[0] || e,\n          clientX = _ref.clientX,\n          clientY = _ref.clientY;\n      var s = (clientX - fieldRect.left) / (fieldRect.right - fieldRect.left);\n      var v = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n      if (v > 1) {\n        v = 1;\n      } else if (v < 0) {\n        v = 0;\n      }\n      if (s > 1) {\n        s = 1;\n      } else if (s < 0) {\n        s = 0;\n      }\n      _this.__color.v = v;\n      _this.__color.s = s;\n      _this.setValue(_this.__color.toOriginal());\n      return false;\n    }\n    function setH(e) {\n      if (e.type.indexOf('touch') === -1) {\n        e.preventDefault();\n      }\n      var fieldRect = _this.__hue_field.getBoundingClientRect();\n      var _ref2 = e.touches && e.touches[0] || e,\n          clientY = _ref2.clientY;\n      var h = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n      if (h > 1) {\n        h = 1;\n      } else if (h < 0) {\n        h = 0;\n      }\n      _this.__color.h = h * 360;\n      _this.setValue(_this.__color.toOriginal());\n      return false;\n    }\n    return _this2;\n  }\n  createClass(ColorController, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      var i = interpret(this.getValue());\n      if (i !== false) {\n        var mismatch = false;\n        Common.each(Color.COMPONENTS, function (component) {\n          if (!Common.isUndefined(i[component]) && !Common.isUndefined(this.__color.__state[component]) && i[component] !== this.__color.__state[component]) {\n            mismatch = true;\n            return {};\n          }\n        }, this);\n        if (mismatch) {\n          Common.extend(this.__color.__state, i);\n        }\n      }\n      Common.extend(this.__temp.__state, this.__color.__state);\n      this.__temp.a = 1;\n      var flip = this.__color.v < 0.5 || this.__color.s > 0.5 ? 255 : 0;\n      var _flip = 255 - flip;\n      Common.extend(this.__field_knob.style, {\n        marginLeft: 100 * this.__color.s - 7 + 'px',\n        marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\n        backgroundColor: this.__temp.toHexString(),\n        border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip + ')'\n      });\n      this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px';\n      this.__temp.s = 1;\n      this.__temp.v = 1;\n      linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toHexString());\n      this.__input.value = this.__color.toString();\n      Common.extend(this.__input.style, {\n        backgroundColor: this.__color.toHexString(),\n        color: 'rgb(' + flip + ',' + flip + ',' + flip + ')',\n        textShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip + ',.7)'\n      });\n    }\n  }]);\n  return ColorController;\n}(Controller);\nvar vendors = ['-moz-', '-o-', '-webkit-', '-ms-', ''];\nfunction linearGradient(elem, x, a, b) {\n  elem.style.background = '';\n  Common.each(vendors, function (vendor) {\n    elem.style.cssText += 'background: ' + vendor + 'linear-gradient(' + x + ', ' + a + ' 0%, ' + b + ' 100%); ';\n  });\n}\nfunction hueGradient(elem) {\n  elem.style.background = '';\n  elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);';\n  elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n}\n\nvar css = {\n  load: function load(url, indoc) {\n    var doc = indoc || document;\n    var link = doc.createElement('link');\n    link.type = 'text/css';\n    link.rel = 'stylesheet';\n    link.href = url;\n    doc.getElementsByTagName('head')[0].appendChild(link);\n  },\n  inject: function inject(cssContent, indoc) {\n    var doc = indoc || document;\n    var injected = document.createElement('style');\n    injected.type = 'text/css';\n    injected.innerHTML = cssContent;\n    var head = doc.getElementsByTagName('head')[0];\n    try {\n      head.appendChild(injected);\n    } catch (e) {\n    }\n  }\n};\n\nvar saveDialogContents = \"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n\\n    </div>\\n\\n  </div>\\n\\n</div>\";\n\nvar ControllerFactory = function ControllerFactory(object, property) {\n  var initialValue = object[property];\n  if (Common.isArray(arguments[2]) || Common.isObject(arguments[2])) {\n    return new OptionController(object, property, arguments[2]);\n  }\n  if (Common.isNumber(initialValue)) {\n    if (Common.isNumber(arguments[2]) && Common.isNumber(arguments[3])) {\n      if (Common.isNumber(arguments[4])) {\n        return new NumberControllerSlider(object, property, arguments[2], arguments[3], arguments[4]);\n      }\n      return new NumberControllerSlider(object, property, arguments[2], arguments[3]);\n    }\n    if (Common.isNumber(arguments[4])) {\n      return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3], step: arguments[4] });\n    }\n    return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3] });\n  }\n  if (Common.isString(initialValue)) {\n    return new StringController(object, property);\n  }\n  if (Common.isFunction(initialValue)) {\n    return new FunctionController(object, property, '');\n  }\n  if (Common.isBoolean(initialValue)) {\n    return new BooleanController(object, property);\n  }\n  return null;\n};\n\nfunction requestAnimationFrame(callback) {\n  setTimeout(callback, 1000 / 60);\n}\nvar requestAnimationFrame$1 = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || requestAnimationFrame;\n\nvar CenteredDiv = function () {\n  function CenteredDiv() {\n    classCallCheck(this, CenteredDiv);\n    this.backgroundElement = document.createElement('div');\n    Common.extend(this.backgroundElement.style, {\n      backgroundColor: 'rgba(0,0,0,0.8)',\n      top: 0,\n      left: 0,\n      display: 'none',\n      zIndex: '1000',\n      opacity: 0,\n      WebkitTransition: 'opacity 0.2s linear',\n      transition: 'opacity 0.2s linear'\n    });\n    dom.makeFullscreen(this.backgroundElement);\n    this.backgroundElement.style.position = 'fixed';\n    this.domElement = document.createElement('div');\n    Common.extend(this.domElement.style, {\n      position: 'fixed',\n      display: 'none',\n      zIndex: '1001',\n      opacity: 0,\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear',\n      transition: 'transform 0.2s ease-out, opacity 0.2s linear'\n    });\n    document.body.appendChild(this.backgroundElement);\n    document.body.appendChild(this.domElement);\n    var _this = this;\n    dom.bind(this.backgroundElement, 'click', function () {\n      _this.hide();\n    });\n  }\n  createClass(CenteredDiv, [{\n    key: 'show',\n    value: function show() {\n      var _this = this;\n      this.backgroundElement.style.display = 'block';\n      this.domElement.style.display = 'block';\n      this.domElement.style.opacity = 0;\n      this.domElement.style.webkitTransform = 'scale(1.1)';\n      this.layout();\n      Common.defer(function () {\n        _this.backgroundElement.style.opacity = 1;\n        _this.domElement.style.opacity = 1;\n        _this.domElement.style.webkitTransform = 'scale(1)';\n      });\n    }\n  }, {\n    key: 'hide',\n    value: function hide() {\n      var _this = this;\n      var hide = function hide() {\n        _this.domElement.style.display = 'none';\n        _this.backgroundElement.style.display = 'none';\n        dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\n        dom.unbind(_this.domElement, 'transitionend', hide);\n        dom.unbind(_this.domElement, 'oTransitionEnd', hide);\n      };\n      dom.bind(this.domElement, 'webkitTransitionEnd', hide);\n      dom.bind(this.domElement, 'transitionend', hide);\n      dom.bind(this.domElement, 'oTransitionEnd', hide);\n      this.backgroundElement.style.opacity = 0;\n      this.domElement.style.opacity = 0;\n      this.domElement.style.webkitTransform = 'scale(1.1)';\n    }\n  }, {\n    key: 'layout',\n    value: function layout() {\n      this.domElement.style.left = window.innerWidth / 2 - dom.getWidth(this.domElement) / 2 + 'px';\n      this.domElement.style.top = window.innerHeight / 2 - dom.getHeight(this.domElement) / 2 + 'px';\n    }\n  }]);\n  return CenteredDiv;\n}();\n\nvar styleSheet = ___$insertStyle(\".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\");\n\ncss.inject(styleSheet);\nvar CSS_NAMESPACE = 'dg';\nvar HIDE_KEY_CODE = 72;\nvar CLOSE_BUTTON_HEIGHT = 20;\nvar DEFAULT_DEFAULT_PRESET_NAME = 'Default';\nvar SUPPORTS_LOCAL_STORAGE = function () {\n  try {\n    return !!window.localStorage;\n  } catch (e) {\n    return false;\n  }\n}();\nvar SAVE_DIALOGUE = void 0;\nvar autoPlaceVirgin = true;\nvar autoPlaceContainer = void 0;\nvar hide = false;\nvar hideableGuis = [];\nvar GUI = function GUI(pars) {\n  var _this = this;\n  var params = pars || {};\n  this.domElement = document.createElement('div');\n  this.__ul = document.createElement('ul');\n  this.domElement.appendChild(this.__ul);\n  dom.addClass(this.domElement, CSS_NAMESPACE);\n  this.__folders = {};\n  this.__controllers = [];\n  this.__rememberedObjects = [];\n  this.__rememberedObjectIndecesToControllers = [];\n  this.__listening = [];\n  params = Common.defaults(params, {\n    closeOnTop: false,\n    autoPlace: true,\n    width: GUI.DEFAULT_WIDTH\n  });\n  params = Common.defaults(params, {\n    resizable: params.autoPlace,\n    hideable: params.autoPlace\n  });\n  if (!Common.isUndefined(params.load)) {\n    if (params.preset) {\n      params.load.preset = params.preset;\n    }\n  } else {\n    params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n  }\n  if (Common.isUndefined(params.parent) && params.hideable) {\n    hideableGuis.push(this);\n  }\n  params.resizable = Common.isUndefined(params.parent) && params.resizable;\n  if (params.autoPlace && Common.isUndefined(params.scrollable)) {\n    params.scrollable = true;\n  }\n  var useLocalStorage = SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\n  var saveToLocalStorage = void 0;\n  var titleRow = void 0;\n  Object.defineProperties(this,\n  {\n    parent: {\n      get: function get$$1() {\n        return params.parent;\n      }\n    },\n    scrollable: {\n      get: function get$$1() {\n        return params.scrollable;\n      }\n    },\n    autoPlace: {\n      get: function get$$1() {\n        return params.autoPlace;\n      }\n    },\n    closeOnTop: {\n      get: function get$$1() {\n        return params.closeOnTop;\n      }\n    },\n    preset: {\n      get: function get$$1() {\n        if (_this.parent) {\n          return _this.getRoot().preset;\n        }\n        return params.load.preset;\n      },\n      set: function set$$1(v) {\n        if (_this.parent) {\n          _this.getRoot().preset = v;\n        } else {\n          params.load.preset = v;\n        }\n        setPresetSelectIndex(this);\n        _this.revert();\n      }\n    },\n    width: {\n      get: function get$$1() {\n        return params.width;\n      },\n      set: function set$$1(v) {\n        params.width = v;\n        setWidth(_this, v);\n      }\n    },\n    name: {\n      get: function get$$1() {\n        return params.name;\n      },\n      set: function set$$1(v) {\n        params.name = v;\n        if (titleRow) {\n          titleRow.innerHTML = params.name;\n        }\n      }\n    },\n    closed: {\n      get: function get$$1() {\n        return params.closed;\n      },\n      set: function set$$1(v) {\n        params.closed = v;\n        if (params.closed) {\n          dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\n        } else {\n          dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\n        }\n        this.onResize();\n        if (_this.__closeButton) {\n          _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n        }\n      }\n    },\n    load: {\n      get: function get$$1() {\n        return params.load;\n      }\n    },\n    useLocalStorage: {\n      get: function get$$1() {\n        return useLocalStorage;\n      },\n      set: function set$$1(bool) {\n        if (SUPPORTS_LOCAL_STORAGE) {\n          useLocalStorage = bool;\n          if (bool) {\n            dom.bind(window, 'unload', saveToLocalStorage);\n          } else {\n            dom.unbind(window, 'unload', saveToLocalStorage);\n          }\n          localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\n        }\n      }\n    }\n  });\n  if (Common.isUndefined(params.parent)) {\n    this.closed = params.closed || false;\n    dom.addClass(this.domElement, GUI.CLASS_MAIN);\n    dom.makeSelectable(this.domElement, false);\n    if (SUPPORTS_LOCAL_STORAGE) {\n      if (useLocalStorage) {\n        _this.useLocalStorage = true;\n        var savedGui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\n        if (savedGui) {\n          params.load = JSON.parse(savedGui);\n        }\n      }\n    }\n    this.__closeButton = document.createElement('div');\n    this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n    dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\n    if (params.closeOnTop) {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_TOP);\n      this.domElement.insertBefore(this.__closeButton, this.domElement.childNodes[0]);\n    } else {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BOTTOM);\n      this.domElement.appendChild(this.__closeButton);\n    }\n    dom.bind(this.__closeButton, 'click', function () {\n      _this.closed = !_this.closed;\n    });\n  } else {\n    if (params.closed === undefined) {\n      params.closed = true;\n    }\n    var titleRowName = document.createTextNode(params.name);\n    dom.addClass(titleRowName, 'controller-name');\n    titleRow = addRow(_this, titleRowName);\n    var onClickTitle = function onClickTitle(e) {\n      e.preventDefault();\n      _this.closed = !_this.closed;\n      return false;\n    };\n    dom.addClass(this.__ul, GUI.CLASS_CLOSED);\n    dom.addClass(titleRow, 'title');\n    dom.bind(titleRow, 'click', onClickTitle);\n    if (!params.closed) {\n      this.closed = false;\n    }\n  }\n  if (params.autoPlace) {\n    if (Common.isUndefined(params.parent)) {\n      if (autoPlaceVirgin) {\n        autoPlaceContainer = document.createElement('div');\n        dom.addClass(autoPlaceContainer, CSS_NAMESPACE);\n        dom.addClass(autoPlaceContainer, GUI.CLASS_AUTO_PLACE_CONTAINER);\n        document.body.appendChild(autoPlaceContainer);\n        autoPlaceVirgin = false;\n      }\n      autoPlaceContainer.appendChild(this.domElement);\n      dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\n    }\n    if (!this.parent) {\n      setWidth(_this, params.width);\n    }\n  }\n  this.__resizeHandler = function () {\n    _this.onResizeDebounced();\n  };\n  dom.bind(window, 'resize', this.__resizeHandler);\n  dom.bind(this.__ul, 'webkitTransitionEnd', this.__resizeHandler);\n  dom.bind(this.__ul, 'transitionend', this.__resizeHandler);\n  dom.bind(this.__ul, 'oTransitionEnd', this.__resizeHandler);\n  this.onResize();\n  if (params.resizable) {\n    addResizeHandle(this);\n  }\n  saveToLocalStorage = function saveToLocalStorage() {\n    if (SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(_this, 'isLocal')) === 'true') {\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\n    }\n  };\n  this.saveToLocalStorageIfPossible = saveToLocalStorage;\n  function resetWidth() {\n    var root = _this.getRoot();\n    root.width += 1;\n    Common.defer(function () {\n      root.width -= 1;\n    });\n  }\n  if (!params.parent) {\n    resetWidth();\n  }\n};\nGUI.toggleHide = function () {\n  hide = !hide;\n  Common.each(hideableGuis, function (gui) {\n    gui.domElement.style.display = hide ? 'none' : '';\n  });\n};\nGUI.CLASS_AUTO_PLACE = 'a';\nGUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\nGUI.CLASS_MAIN = 'main';\nGUI.CLASS_CONTROLLER_ROW = 'cr';\nGUI.CLASS_TOO_TALL = 'taller-than-window';\nGUI.CLASS_CLOSED = 'closed';\nGUI.CLASS_CLOSE_BUTTON = 'close-button';\nGUI.CLASS_CLOSE_TOP = 'close-top';\nGUI.CLASS_CLOSE_BOTTOM = 'close-bottom';\nGUI.CLASS_DRAG = 'drag';\nGUI.DEFAULT_WIDTH = 245;\nGUI.TEXT_CLOSED = 'Close Controls';\nGUI.TEXT_OPEN = 'Open Controls';\nGUI._keydownHandler = function (e) {\n  if (document.activeElement.type !== 'text' && (e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE)) {\n    GUI.toggleHide();\n  }\n};\ndom.bind(window, 'keydown', GUI._keydownHandler, false);\nCommon.extend(GUI.prototype,\n{\n  add: function add(object, property) {\n    return _add(this, object, property, {\n      factoryArgs: Array.prototype.slice.call(arguments, 2)\n    });\n  },\n  addColor: function addColor(object, property) {\n    return _add(this, object, property, {\n      color: true\n    });\n  },\n  remove: function remove(controller) {\n    this.__ul.removeChild(controller.__li);\n    this.__controllers.splice(this.__controllers.indexOf(controller), 1);\n    var _this = this;\n    Common.defer(function () {\n      _this.onResize();\n    });\n  },\n  destroy: function destroy() {\n    if (this.parent) {\n      throw new Error('Only the root GUI should be removed with .destroy(). ' + 'For subfolders, use gui.removeFolder(folder) instead.');\n    }\n    if (this.autoPlace) {\n      autoPlaceContainer.removeChild(this.domElement);\n    }\n    var _this = this;\n    Common.each(this.__folders, function (subfolder) {\n      _this.removeFolder(subfolder);\n    });\n    dom.unbind(window, 'keydown', GUI._keydownHandler, false);\n    removeListeners(this);\n  },\n  addFolder: function addFolder(name) {\n    if (this.__folders[name] !== undefined) {\n      throw new Error('You already have a folder in this GUI by the' + ' name \"' + name + '\"');\n    }\n    var newGuiParams = { name: name, parent: this };\n    newGuiParams.autoPlace = this.autoPlace;\n    if (this.load &&\n    this.load.folders &&\n    this.load.folders[name]) {\n      newGuiParams.closed = this.load.folders[name].closed;\n      newGuiParams.load = this.load.folders[name];\n    }\n    var gui = new GUI(newGuiParams);\n    this.__folders[name] = gui;\n    var li = addRow(this, gui.domElement);\n    dom.addClass(li, 'folder');\n    return gui;\n  },\n  removeFolder: function removeFolder(folder) {\n    this.__ul.removeChild(folder.domElement.parentElement);\n    delete this.__folders[folder.name];\n    if (this.load &&\n    this.load.folders &&\n    this.load.folders[folder.name]) {\n      delete this.load.folders[folder.name];\n    }\n    removeListeners(folder);\n    var _this = this;\n    Common.each(folder.__folders, function (subfolder) {\n      folder.removeFolder(subfolder);\n    });\n    Common.defer(function () {\n      _this.onResize();\n    });\n  },\n  open: function open() {\n    this.closed = false;\n  },\n  close: function close() {\n    this.closed = true;\n  },\n  hide: function hide() {\n    this.domElement.style.display = 'none';\n  },\n  show: function show() {\n    this.domElement.style.display = '';\n  },\n  onResize: function onResize() {\n    var root = this.getRoot();\n    if (root.scrollable) {\n      var top = dom.getOffset(root.__ul).top;\n      var h = 0;\n      Common.each(root.__ul.childNodes, function (node) {\n        if (!(root.autoPlace && node === root.__save_row)) {\n          h += dom.getHeight(node);\n        }\n      });\n      if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\n        dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\n        root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n      } else {\n        dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\n        root.__ul.style.height = 'auto';\n      }\n    }\n    if (root.__resize_handle) {\n      Common.defer(function () {\n        root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n      });\n    }\n    if (root.__closeButton) {\n      root.__closeButton.style.width = root.width + 'px';\n    }\n  },\n  onResizeDebounced: Common.debounce(function () {\n    this.onResize();\n  }, 50),\n  remember: function remember() {\n    if (Common.isUndefined(SAVE_DIALOGUE)) {\n      SAVE_DIALOGUE = new CenteredDiv();\n      SAVE_DIALOGUE.domElement.innerHTML = saveDialogContents;\n    }\n    if (this.parent) {\n      throw new Error('You can only call remember on a top level GUI.');\n    }\n    var _this = this;\n    Common.each(Array.prototype.slice.call(arguments), function (object) {\n      if (_this.__rememberedObjects.length === 0) {\n        addSaveMenu(_this);\n      }\n      if (_this.__rememberedObjects.indexOf(object) === -1) {\n        _this.__rememberedObjects.push(object);\n      }\n    });\n    if (this.autoPlace) {\n      setWidth(this, this.width);\n    }\n  },\n  getRoot: function getRoot() {\n    var gui = this;\n    while (gui.parent) {\n      gui = gui.parent;\n    }\n    return gui;\n  },\n  getSaveObject: function getSaveObject() {\n    var toReturn = this.load;\n    toReturn.closed = this.closed;\n    if (this.__rememberedObjects.length > 0) {\n      toReturn.preset = this.preset;\n      if (!toReturn.remembered) {\n        toReturn.remembered = {};\n      }\n      toReturn.remembered[this.preset] = getCurrentPreset(this);\n    }\n    toReturn.folders = {};\n    Common.each(this.__folders, function (element, key) {\n      toReturn.folders[key] = element.getSaveObject();\n    });\n    return toReturn;\n  },\n  save: function save() {\n    if (!this.load.remembered) {\n      this.load.remembered = {};\n    }\n    this.load.remembered[this.preset] = getCurrentPreset(this);\n    markPresetModified(this, false);\n    this.saveToLocalStorageIfPossible();\n  },\n  saveAs: function saveAs(presetName) {\n    if (!this.load.remembered) {\n      this.load.remembered = {};\n      this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\n    }\n    this.load.remembered[presetName] = getCurrentPreset(this);\n    this.preset = presetName;\n    addPresetOption(this, presetName, true);\n    this.saveToLocalStorageIfPossible();\n  },\n  revert: function revert(gui) {\n    Common.each(this.__controllers, function (controller) {\n      if (!this.getRoot().load.remembered) {\n        controller.setValue(controller.initialValue);\n      } else {\n        recallSavedValue(gui || this.getRoot(), controller);\n      }\n      if (controller.__onFinishChange) {\n        controller.__onFinishChange.call(controller, controller.getValue());\n      }\n    }, this);\n    Common.each(this.__folders, function (folder) {\n      folder.revert(folder);\n    });\n    if (!gui) {\n      markPresetModified(this.getRoot(), false);\n    }\n  },\n  listen: function listen(controller) {\n    var init = this.__listening.length === 0;\n    this.__listening.push(controller);\n    if (init) {\n      updateDisplays(this.__listening);\n    }\n  },\n  updateDisplay: function updateDisplay() {\n    Common.each(this.__controllers, function (controller) {\n      controller.updateDisplay();\n    });\n    Common.each(this.__folders, function (folder) {\n      folder.updateDisplay();\n    });\n  }\n});\nfunction addRow(gui, newDom, liBefore) {\n  var li = document.createElement('li');\n  if (newDom) {\n    li.appendChild(newDom);\n  }\n  if (liBefore) {\n    gui.__ul.insertBefore(li, liBefore);\n  } else {\n    gui.__ul.appendChild(li);\n  }\n  gui.onResize();\n  return li;\n}\nfunction removeListeners(gui) {\n  dom.unbind(window, 'resize', gui.__resizeHandler);\n  if (gui.saveToLocalStorageIfPossible) {\n    dom.unbind(window, 'unload', gui.saveToLocalStorageIfPossible);\n  }\n}\nfunction markPresetModified(gui, modified) {\n  var opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n  if (modified) {\n    opt.innerHTML = opt.value + '*';\n  } else {\n    opt.innerHTML = opt.value;\n  }\n}\nfunction augmentController(gui, li, controller) {\n  controller.__li = li;\n  controller.__gui = gui;\n  Common.extend(controller,                                   {\n    options: function options(_options) {\n      if (arguments.length > 1) {\n        var nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n        return _add(gui, controller.object, controller.property, {\n          before: nextSibling,\n          factoryArgs: [Common.toArray(arguments)]\n        });\n      }\n      if (Common.isArray(_options) || Common.isObject(_options)) {\n        var _nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n        return _add(gui, controller.object, controller.property, {\n          before: _nextSibling,\n          factoryArgs: [_options]\n        });\n      }\n    },\n    name: function name(_name) {\n      controller.__li.firstElementChild.firstElementChild.innerHTML = _name;\n      return controller;\n    },\n    listen: function listen() {\n      controller.__gui.listen(controller);\n      return controller;\n    },\n    remove: function remove() {\n      controller.__gui.remove(controller);\n      return controller;\n    }\n  });\n  if (controller instanceof NumberControllerSlider) {\n    var box = new NumberControllerBox(controller.object, controller.property, { min: controller.__min, max: controller.__max, step: controller.__step });\n    Common.each(['updateDisplay', 'onChange', 'onFinishChange', 'step', 'min', 'max'], function (method) {\n      var pc = controller[method];\n      var pb = box[method];\n      controller[method] = box[method] = function () {\n        var args = Array.prototype.slice.call(arguments);\n        pb.apply(box, args);\n        return pc.apply(controller, args);\n      };\n    });\n    dom.addClass(li, 'has-slider');\n    controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\n  } else if (controller instanceof NumberControllerBox) {\n    var r = function r(returned) {\n      if (Common.isNumber(controller.__min) && Common.isNumber(controller.__max)) {\n        var oldName = controller.__li.firstElementChild.firstElementChild.innerHTML;\n        var wasListening = controller.__gui.__listening.indexOf(controller) > -1;\n        controller.remove();\n        var newController = _add(gui, controller.object, controller.property, {\n          before: controller.__li.nextElementSibling,\n          factoryArgs: [controller.__min, controller.__max, controller.__step]\n        });\n        newController.name(oldName);\n        if (wasListening) newController.listen();\n        return newController;\n      }\n      return returned;\n    };\n    controller.min = Common.compose(r, controller.min);\n    controller.max = Common.compose(r, controller.max);\n  } else if (controller instanceof BooleanController) {\n    dom.bind(li, 'click', function () {\n      dom.fakeEvent(controller.__checkbox, 'click');\n    });\n    dom.bind(controller.__checkbox, 'click', function (e) {\n      e.stopPropagation();\n    });\n  } else if (controller instanceof FunctionController) {\n    dom.bind(li, 'click', function () {\n      dom.fakeEvent(controller.__button, 'click');\n    });\n    dom.bind(li, 'mouseover', function () {\n      dom.addClass(controller.__button, 'hover');\n    });\n    dom.bind(li, 'mouseout', function () {\n      dom.removeClass(controller.__button, 'hover');\n    });\n  } else if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n    controller.updateDisplay = Common.compose(function (val) {\n      li.style.borderLeftColor = controller.__color.toString();\n      return val;\n    }, controller.updateDisplay);\n    controller.updateDisplay();\n  }\n  controller.setValue = Common.compose(function (val) {\n    if (gui.getRoot().__preset_select && controller.isModified()) {\n      markPresetModified(gui.getRoot(), true);\n    }\n    return val;\n  }, controller.setValue);\n}\nfunction recallSavedValue(gui, controller) {\n  var root = gui.getRoot();\n  var matchedIndex = root.__rememberedObjects.indexOf(controller.object);\n  if (matchedIndex !== -1) {\n    var controllerMap = root.__rememberedObjectIndecesToControllers[matchedIndex];\n    if (controllerMap === undefined) {\n      controllerMap = {};\n      root.__rememberedObjectIndecesToControllers[matchedIndex] = controllerMap;\n    }\n    controllerMap[controller.property] = controller;\n    if (root.load && root.load.remembered) {\n      var presetMap = root.load.remembered;\n      var preset = void 0;\n      if (presetMap[gui.preset]) {\n        preset = presetMap[gui.preset];\n      } else if (presetMap[DEFAULT_DEFAULT_PRESET_NAME]) {\n        preset = presetMap[DEFAULT_DEFAULT_PRESET_NAME];\n      } else {\n        return;\n      }\n      if (preset[matchedIndex] && preset[matchedIndex][controller.property] !== undefined) {\n        var value = preset[matchedIndex][controller.property];\n        controller.initialValue = value;\n        controller.setValue(value);\n      }\n    }\n  }\n}\nfunction _add(gui, object, property, params) {\n  if (object[property] === undefined) {\n    throw new Error('Object \"' + object + '\" has no property \"' + property + '\"');\n  }\n  var controller = void 0;\n  if (params.color) {\n    controller = new ColorController(object, property);\n  } else {\n    var factoryArgs = [object, property].concat(params.factoryArgs);\n    controller = ControllerFactory.apply(gui, factoryArgs);\n  }\n  if (params.before instanceof Controller) {\n    params.before = params.before.__li;\n  }\n  recallSavedValue(gui, controller);\n  dom.addClass(controller.domElement, 'c');\n  var name = document.createElement('span');\n  dom.addClass(name, 'property-name');\n  name.innerHTML = controller.property;\n  var container = document.createElement('div');\n  container.appendChild(name);\n  container.appendChild(controller.domElement);\n  var li = addRow(gui, container, params.before);\n  dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\n  if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n  } else {\n    dom.addClass(li, _typeof(controller.getValue()));\n  }\n  augmentController(gui, li, controller);\n  gui.__controllers.push(controller);\n  return controller;\n}\nfunction getLocalStorageHash(gui, key) {\n  return document.location.href + '.' + key;\n}\nfunction addPresetOption(gui, name, setSelected) {\n  var opt = document.createElement('option');\n  opt.innerHTML = name;\n  opt.value = name;\n  gui.__preset_select.appendChild(opt);\n  if (setSelected) {\n    gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n  }\n}\nfunction showHideExplain(gui, explain) {\n  explain.style.display = gui.useLocalStorage ? 'block' : 'none';\n}\nfunction addSaveMenu(gui) {\n  var div = gui.__save_row = document.createElement('li');\n  dom.addClass(gui.domElement, 'has-save');\n  gui.__ul.insertBefore(div, gui.__ul.firstChild);\n  dom.addClass(div, 'save-row');\n  var gears = document.createElement('span');\n  gears.innerHTML = '&nbsp;';\n  dom.addClass(gears, 'button gears');\n  var button = document.createElement('span');\n  button.innerHTML = 'Save';\n  dom.addClass(button, 'button');\n  dom.addClass(button, 'save');\n  var button2 = document.createElement('span');\n  button2.innerHTML = 'New';\n  dom.addClass(button2, 'button');\n  dom.addClass(button2, 'save-as');\n  var button3 = document.createElement('span');\n  button3.innerHTML = 'Revert';\n  dom.addClass(button3, 'button');\n  dom.addClass(button3, 'revert');\n  var select = gui.__preset_select = document.createElement('select');\n  if (gui.load && gui.load.remembered) {\n    Common.each(gui.load.remembered, function (value, key) {\n      addPresetOption(gui, key, key === gui.preset);\n    });\n  } else {\n    addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\n  }\n  dom.bind(select, 'change', function () {\n    for (var index = 0; index < gui.__preset_select.length; index++) {\n      gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\n    }\n    gui.preset = this.value;\n  });\n  div.appendChild(select);\n  div.appendChild(gears);\n  div.appendChild(button);\n  div.appendChild(button2);\n  div.appendChild(button3);\n  if (SUPPORTS_LOCAL_STORAGE) {\n    var explain = document.getElementById('dg-local-explain');\n    var localStorageCheckBox = document.getElementById('dg-local-storage');\n    var saveLocally = document.getElementById('dg-save-locally');\n    saveLocally.style.display = 'block';\n    if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\n      localStorageCheckBox.setAttribute('checked', 'checked');\n    }\n    showHideExplain(gui, explain);\n    dom.bind(localStorageCheckBox, 'change', function () {\n      gui.useLocalStorage = !gui.useLocalStorage;\n      showHideExplain(gui, explain);\n    });\n  }\n  var newConstructorTextArea = document.getElementById('dg-new-constructor');\n  dom.bind(newConstructorTextArea, 'keydown', function (e) {\n    if (e.metaKey && (e.which === 67 || e.keyCode === 67)) {\n      SAVE_DIALOGUE.hide();\n    }\n  });\n  dom.bind(gears, 'click', function () {\n    newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\n    SAVE_DIALOGUE.show();\n    newConstructorTextArea.focus();\n    newConstructorTextArea.select();\n  });\n  dom.bind(button, 'click', function () {\n    gui.save();\n  });\n  dom.bind(button2, 'click', function () {\n    var presetName = prompt('Enter a new preset name.');\n    if (presetName) {\n      gui.saveAs(presetName);\n    }\n  });\n  dom.bind(button3, 'click', function () {\n    gui.revert();\n  });\n}\nfunction addResizeHandle(gui) {\n  var pmouseX = void 0;\n  gui.__resize_handle = document.createElement('div');\n  Common.extend(gui.__resize_handle.style, {\n    width: '6px',\n    marginLeft: '-3px',\n    height: '200px',\n    cursor: 'ew-resize',\n    position: 'absolute'\n  });\n  function drag(e) {\n    e.preventDefault();\n    gui.width += pmouseX - e.clientX;\n    gui.onResize();\n    pmouseX = e.clientX;\n    return false;\n  }\n  function dragStop() {\n    dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.unbind(window, 'mousemove', drag);\n    dom.unbind(window, 'mouseup', dragStop);\n  }\n  function dragStart(e) {\n    e.preventDefault();\n    pmouseX = e.clientX;\n    dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.bind(window, 'mousemove', drag);\n    dom.bind(window, 'mouseup', dragStop);\n    return false;\n  }\n  dom.bind(gui.__resize_handle, 'mousedown', dragStart);\n  dom.bind(gui.__closeButton, 'mousedown', dragStart);\n  gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\n}\nfunction setWidth(gui, w) {\n  gui.domElement.style.width = w + 'px';\n  if (gui.__save_row && gui.autoPlace) {\n    gui.__save_row.style.width = w + 'px';\n  }\n  if (gui.__closeButton) {\n    gui.__closeButton.style.width = w + 'px';\n  }\n}\nfunction getCurrentPreset(gui, useInitialValues) {\n  var toReturn = {};\n  Common.each(gui.__rememberedObjects, function (val, index) {\n    var savedValues = {};\n    var controllerMap = gui.__rememberedObjectIndecesToControllers[index];\n    Common.each(controllerMap, function (controller, property) {\n      savedValues[property] = useInitialValues ? controller.initialValue : controller.getValue();\n    });\n    toReturn[index] = savedValues;\n  });\n  return toReturn;\n}\nfunction setPresetSelectIndex(gui) {\n  for (var index = 0; index < gui.__preset_select.length; index++) {\n    if (gui.__preset_select[index].value === gui.preset) {\n      gui.__preset_select.selectedIndex = index;\n    }\n  }\n}\nfunction updateDisplays(controllerArray) {\n  if (controllerArray.length !== 0) {\n    requestAnimationFrame$1.call(window, function () {\n      updateDisplays(controllerArray);\n    });\n  }\n  Common.each(controllerArray, function (c) {\n    c.updateDisplay();\n  });\n}\n\nvar color = {\n  Color: Color,\n  math: ColorMath,\n  interpret: interpret\n};\nvar controllers = {\n  Controller: Controller,\n  BooleanController: BooleanController,\n  OptionController: OptionController,\n  StringController: StringController,\n  NumberController: NumberController,\n  NumberControllerBox: NumberControllerBox,\n  NumberControllerSlider: NumberControllerSlider,\n  FunctionController: FunctionController,\n  ColorController: ColorController\n};\nvar dom$1 = { dom: dom };\nvar gui = { GUI: GUI };\nvar GUI$1 = GUI;\nvar index = {\n  color: color,\n  controllers: controllers,\n  dom: dom$1,\n  gui: gui,\n  GUI: GUI$1\n};\n\nexport { color, controllers, dom$1 as dom, gui, GUI$1 as GUI };\nexport default index;\n//# sourceMappingURL=dat.gui.module.js.map\n","/*\n* Copyright (c) 2015, Leon Sorokin\n* All rights reserved. (MIT Licensed)\n*\n* RgbQuant.js - an image quantization lib\n*/\n\n(function(){\n\tfunction RgbQuant(opts) {\n\t\topts = opts || {};\n\n\t\t// 1 = by global population, 2 = subregion population threshold\n\t\tthis.method = opts.method || 2;\n\t\t// desired final palette size\n\t\tthis.colors = opts.colors || 256;\n\t\t// # of highest-frequency colors to start with for palette reduction\n\t\tthis.initColors = opts.initColors || 4096;\n\t\t// color-distance threshold for initial reduction pass\n\t\tthis.initDist = opts.initDist || 0.01;\n\t\t// subsequent passes threshold\n\t\tthis.distIncr = opts.distIncr || 0.005;\n\t\t// palette grouping\n\t\tthis.hueGroups = opts.hueGroups || 10;\n\t\tthis.satGroups = opts.satGroups || 10;\n\t\tthis.lumGroups = opts.lumGroups || 10;\n\t\t// if > 0, enables hues stats and min-color retention per group\n\t\tthis.minHueCols = opts.minHueCols || 0;\n\t\t// HueStats instance\n\t\tthis.hueStats = this.minHueCols ? new HueStats(this.hueGroups, this.minHueCols) : null;\n\n\t\t// subregion partitioning box size\n\t\tthis.boxSize = opts.boxSize || [64,64];\n\t\t// number of same pixels required within box for histogram inclusion\n\t\tthis.boxPxls = opts.boxPxls || 2;\n\t\t// palette locked indicator\n\t\tthis.palLocked = false;\n\t\t// palette sort order\n//\t\tthis.sortPal = ['hue-','lum-','sat-'];\n\n\t\t// dithering/error diffusion kernel name\n\t\tthis.dithKern = opts.dithKern || null;\n\t\t// dither serpentine pattern\n\t\tthis.dithSerp = opts.dithSerp || false;\n\t\t// minimum color difference (0-1) needed to dither\n\t\tthis.dithDelta = opts.dithDelta || 0;\n\n\t\t// accumulated histogram\n\t\tthis.histogram = {};\n\t\t// palette - rgb triplets\n\t\tthis.idxrgb = opts.palette ? opts.palette.slice(0) : [];\n\t\t// palette - int32 vals\n\t\tthis.idxi32 = [];\n\t\t// reverse lookup {i32:idx}\n\t\tthis.i32idx = {};\n\t\t// {i32:rgb}\n\t\tthis.i32rgb = {};\n\t\t// enable color caching (also incurs overhead of cache misses and cache building)\n\t\tthis.useCache = opts.useCache !== false;\n\t\t// min color occurance count needed to qualify for caching\n\t\tthis.cacheFreq = opts.cacheFreq || 10;\n\t\t// allows pre-defined palettes to be re-indexed (enabling palette compacting and sorting)\n\t\tthis.reIndex = opts.reIndex || this.idxrgb.length == 0;\n\t\t// selection of color-distance equation\n\t\tthis.colorDist = opts.colorDist == \"manhattan\" ? distManhattan : distEuclidean;\n\n\t\t// if pre-defined palette, build lookups\n\t\tif (this.idxrgb.length > 0) {\n\t\t\tvar self = this;\n\t\t\tthis.idxrgb.forEach(function(rgb, i) {\n\t\t\t\tvar i32 = (\n\t\t\t\t\t(255    << 24) |\t// alpha\n\t\t\t\t\t(rgb[2] << 16) |\t// blue\n\t\t\t\t\t(rgb[1] <<  8) |\t// green\n\t\t\t\t\t rgb[0]\t\t\t\t// red\n\t\t\t\t) >>> 0;\n\n\t\t\t\tself.idxi32[i]\t\t= i32;\n\t\t\t\tself.i32idx[i32]\t= i;\n\t\t\t\tself.i32rgb[i32]\t= rgb;\n\t\t\t});\n\t\t}\n\t}\n\n\t// gathers histogram info\n\tRgbQuant.prototype.sample = function sample(img, width) {\n\t\tif (this.palLocked)\n\t\t\tthrow \"Cannot sample additional images, palette already assembled.\";\n\n\t\tvar data = getImageData(img, width);\n\n\t\tswitch (this.method) {\n\t\t\tcase 1: this.colorStats1D(data.buf32); break;\n\t\t\tcase 2: this.colorStats2D(data.buf32, data.width); break;\n\t\t}\n\t};\n\n\t// image quantizer\n\t// todo: memoize colors here also\n\t// @retType: 1 - Uint8Array (default), 2 - Indexed array, 3 - Match @img type (unimplemented, todo)\n\tRgbQuant.prototype.reduce = function reduce(img, retType, dithKern, dithSerp) {\n\t\tif (!this.palLocked)\n\t\t\tthis.buildPal();\n\n\t\tdithKern = dithKern || this.dithKern;\n\t\tdithSerp = typeof dithSerp != \"undefined\" ? dithSerp : this.dithSerp;\n\n\t\tretType = retType || 1;\n\n\t\t// reduce w/dither\n\t\tif (dithKern)\n\t\t\tvar out32 = this.dither(img, dithKern, dithSerp);\n\t\telse {\n\t\t\tvar data = getImageData(img),\n\t\t\t\tbuf32 = data.buf32,\n\t\t\t\tlen = buf32.length,\n\t\t\t\tout32 = new Uint32Array(len);\n\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tvar i32 = buf32[i];\n\t\t\t\tout32[i] = this.nearestColor(i32);\n\t\t\t}\n\t\t}\n\n\t\tif (retType == 1)\n\t\t\treturn new Uint8Array(out32.buffer);\n\n\t\tif (retType == 2) {\n\t\t\tvar out = [],\n\t\t\t\tlen = out32.length;\n\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tvar i32 = out32[i];\n\t\t\t\tout[i] = this.i32idx[i32];\n\t\t\t}\n\n\t\t\treturn out;\n\t\t}\n\t};\n\n\t// adapted from http://jsbin.com/iXofIji/2/edit by PAEz\n\tRgbQuant.prototype.dither = function(img, kernel, serpentine) {\n\t\t// http://www.tannerhelland.com/4660/dithering-eleven-algorithms-source-code/\n\t\tvar kernels = {\n\t\t\tFloydSteinberg: [\n\t\t\t\t[7 / 16, 1, 0],\n\t\t\t\t[3 / 16, -1, 1],\n\t\t\t\t[5 / 16, 0, 1],\n\t\t\t\t[1 / 16, 1, 1]\n\t\t\t],\n\t\t\tFalseFloydSteinberg: [\n\t\t\t\t[3 / 8, 1, 0],\n\t\t\t\t[3 / 8, 0, 1],\n\t\t\t\t[2 / 8, 1, 1]\n\t\t\t],\n\t\t\tStucki: [\n\t\t\t\t[8 / 42, 1, 0],\n\t\t\t\t[4 / 42, 2, 0],\n\t\t\t\t[2 / 42, -2, 1],\n\t\t\t\t[4 / 42, -1, 1],\n\t\t\t\t[8 / 42, 0, 1],\n\t\t\t\t[4 / 42, 1, 1],\n\t\t\t\t[2 / 42, 2, 1],\n\t\t\t\t[1 / 42, -2, 2],\n\t\t\t\t[2 / 42, -1, 2],\n\t\t\t\t[4 / 42, 0, 2],\n\t\t\t\t[2 / 42, 1, 2],\n\t\t\t\t[1 / 42, 2, 2]\n\t\t\t],\n\t\t\tAtkinson: [\n\t\t\t\t[1 / 8, 1, 0],\n\t\t\t\t[1 / 8, 2, 0],\n\t\t\t\t[1 / 8, -1, 1],\n\t\t\t\t[1 / 8, 0, 1],\n\t\t\t\t[1 / 8, 1, 1],\n\t\t\t\t[1 / 8, 0, 2]\n\t\t\t],\n\t\t\tJarvis: [\t\t\t// Jarvis, Judice, and Ninke / JJN?\n\t\t\t\t[7 / 48, 1, 0],\n\t\t\t\t[5 / 48, 2, 0],\n\t\t\t\t[3 / 48, -2, 1],\n\t\t\t\t[5 / 48, -1, 1],\n\t\t\t\t[7 / 48, 0, 1],\n\t\t\t\t[5 / 48, 1, 1],\n\t\t\t\t[3 / 48, 2, 1],\n\t\t\t\t[1 / 48, -2, 2],\n\t\t\t\t[3 / 48, -1, 2],\n\t\t\t\t[5 / 48, 0, 2],\n\t\t\t\t[3 / 48, 1, 2],\n\t\t\t\t[1 / 48, 2, 2]\n\t\t\t],\n\t\t\tBurkes: [\n\t\t\t\t[8 / 32, 1, 0],\n\t\t\t\t[4 / 32, 2, 0],\n\t\t\t\t[2 / 32, -2, 1],\n\t\t\t\t[4 / 32, -1, 1],\n\t\t\t\t[8 / 32, 0, 1],\n\t\t\t\t[4 / 32, 1, 1],\n\t\t\t\t[2 / 32, 2, 1],\n\t\t\t],\n\t\t\tSierra: [\n\t\t\t\t[5 / 32, 1, 0],\n\t\t\t\t[3 / 32, 2, 0],\n\t\t\t\t[2 / 32, -2, 1],\n\t\t\t\t[4 / 32, -1, 1],\n\t\t\t\t[5 / 32, 0, 1],\n\t\t\t\t[4 / 32, 1, 1],\n\t\t\t\t[2 / 32, 2, 1],\n\t\t\t\t[2 / 32, -1, 2],\n\t\t\t\t[3 / 32, 0, 2],\n\t\t\t\t[2 / 32, 1, 2],\n\t\t\t],\n\t\t\tTwoSierra: [\n\t\t\t\t[4 / 16, 1, 0],\n\t\t\t\t[3 / 16, 2, 0],\n\t\t\t\t[1 / 16, -2, 1],\n\t\t\t\t[2 / 16, -1, 1],\n\t\t\t\t[3 / 16, 0, 1],\n\t\t\t\t[2 / 16, 1, 1],\n\t\t\t\t[1 / 16, 2, 1],\n\t\t\t],\n\t\t\tSierraLite: [\n\t\t\t\t[2 / 4, 1, 0],\n\t\t\t\t[1 / 4, -1, 1],\n\t\t\t\t[1 / 4, 0, 1],\n\t\t\t],\n\t\t};\n\n\t\tif (!kernel || !kernels[kernel]) {\n\t\t\tthrow 'Unknown dithering kernel: ' + kernel;\n\t\t}\n\n\t\tvar ds = kernels[kernel];\n\n\t\tvar data = getImageData(img),\n//\t\t\tbuf8 = data.buf8,\n\t\t\tbuf32 = data.buf32,\n\t\t\twidth = data.width,\n\t\t\theight = data.height,\n\t\t\tlen = buf32.length;\n\n\t\tvar dir = serpentine ? -1 : 1;\n\n\t\tfor (var y = 0; y < height; y++) {\n\t\t\tif (serpentine)\n\t\t\t\tdir = dir * -1;\n\n\t\t\tvar lni = y * width;\n\n\t\t\tfor (var x = (dir == 1 ? 0 : width - 1), xend = (dir == 1 ? width : 0); x !== xend; x += dir) {\n\t\t\t\t// Image pixel\n\t\t\t\tvar idx = lni + x,\n\t\t\t\t\ti32 = buf32[idx],\n\t\t\t\t\tr1 = (i32 & 0xff),\n\t\t\t\t\tg1 = (i32 & 0xff00) >> 8,\n\t\t\t\t\tb1 = (i32 & 0xff0000) >> 16;\n\n\t\t\t\t// Reduced pixel\n\t\t\t\tvar i32x = this.nearestColor(i32),\n\t\t\t\t\tr2 = (i32x & 0xff),\n\t\t\t\t\tg2 = (i32x & 0xff00) >> 8,\n\t\t\t\t\tb2 = (i32x & 0xff0000) >> 16;\n\n\t\t\t\tbuf32[idx] =\n\t\t\t\t\t(255 << 24)\t|\t// alpha\n\t\t\t\t\t(b2  << 16)\t|\t// blue\n\t\t\t\t\t(g2  <<  8)\t|\t// green\n\t\t\t\t\t r2;\n\n\t\t\t\t// dithering strength\n\t\t\t\tif (this.dithDelta) {\n\t\t\t\t\tvar dist = this.colorDist([r1, g1, b1], [r2, g2, b2]);\n\t\t\t\t\tif (dist < this.dithDelta)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Component distance\n\t\t\t\tvar er = r1 - r2,\n\t\t\t\t\teg = g1 - g2,\n\t\t\t\t\teb = b1 - b2;\n\n\t\t\t\tfor (var i = (dir == 1 ? 0 : ds.length - 1), end = (dir == 1 ? ds.length : 0); i !== end; i += dir) {\n\t\t\t\t\tvar x1 = ds[i][1] * dir,\n\t\t\t\t\t\ty1 = ds[i][2];\n\n\t\t\t\t\tvar lni2 = y1 * width;\n\n\t\t\t\t\tif (x1 + x >= 0 && x1 + x < width && y1 + y >= 0 && y1 + y < height) {\n\t\t\t\t\t\tvar d = ds[i][0];\n\t\t\t\t\t\tvar idx2 = idx + (lni2 + x1);\n\n\t\t\t\t\t\tvar r3 = (buf32[idx2] & 0xff),\n\t\t\t\t\t\t\tg3 = (buf32[idx2] & 0xff00) >> 8,\n\t\t\t\t\t\t\tb3 = (buf32[idx2] & 0xff0000) >> 16;\n\n\t\t\t\t\t\tvar r4 = Math.max(0, Math.min(255, r3 + er * d)),\n\t\t\t\t\t\t\tg4 = Math.max(0, Math.min(255, g3 + eg * d)),\n\t\t\t\t\t\t\tb4 = Math.max(0, Math.min(255, b3 + eb * d));\n\n\t\t\t\t\t\tbuf32[idx2] =\n\t\t\t\t\t\t\t(255 << 24)\t|\t// alpha\n\t\t\t\t\t\t\t(b4  << 16)\t|\t// blue\n\t\t\t\t\t\t\t(g4  <<  8)\t|\t// green\n\t\t\t\t\t\t\t r4;\t\t\t// red\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn buf32;\n\t};\n\n\t// reduces histogram to palette, remaps & memoizes reduced colors\n\tRgbQuant.prototype.buildPal = function buildPal(noSort) {\n\t\tif (this.palLocked || this.idxrgb.length > 0 && this.idxrgb.length <= this.colors) return;\n\n\t\tvar histG  = this.histogram,\n\t\t\tsorted = sortedHashKeys(histG, true);\n\n\t\tif (sorted.length == 0)\n\t\t\tthrow \"Nothing has been sampled, palette cannot be built.\";\n\n\t\tswitch (this.method) {\n\t\t\tcase 1:\n\t\t\t\tvar cols = this.initColors,\n\t\t\t\t\tlast = sorted[cols - 1],\n\t\t\t\t\tfreq = histG[last];\n\n\t\t\t\tvar idxi32 = sorted.slice(0, cols);\n\n\t\t\t\t// add any cut off colors with same freq as last\n\t\t\t\tvar pos = cols, len = sorted.length;\n\t\t\t\twhile (pos < len && histG[sorted[pos]] == freq)\n\t\t\t\t\tidxi32.push(sorted[pos++]);\n\n\t\t\t\t// inject min huegroup colors\n\t\t\t\tif (this.hueStats)\n\t\t\t\t\tthis.hueStats.inject(idxi32);\n\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tvar idxi32 = sorted;\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// int32-ify values\n\t\tidxi32 = idxi32.map(function(v){return +v;});\n\n\t\tthis.reducePal(idxi32);\n\n\t\tif (!noSort && this.reIndex)\n\t\t\tthis.sortPal();\n\n\t\t// build cache of top histogram colors\n\t\tif (this.useCache)\n\t\t\tthis.cacheHistogram(idxi32);\n\n\t\tthis.palLocked = true;\n\t};\n\n\tRgbQuant.prototype.palette = function palette(tuples, noSort) {\n\t\tthis.buildPal(noSort);\n\t\treturn tuples ? this.idxrgb : new Uint8Array((new Uint32Array(this.idxi32)).buffer);\n\t};\n\n\tRgbQuant.prototype.prunePal = function prunePal(keep) {\n\t\tvar i32;\n\n\t\tfor (var j = 0; j < this.idxrgb.length; j++) {\n\t\t\tif (!keep[j]) {\n\t\t\t\ti32 = this.idxi32[j];\n\t\t\t\tthis.idxrgb[j] = null;\n\t\t\t\tthis.idxi32[j] = null;\n\t\t\t\tdelete this.i32idx[i32];\n\t\t\t}\n\t\t}\n\n\t\t// compact\n\t\tif (this.reIndex) {\n\t\t\tvar idxrgb = [],\n\t\t\t\tidxi32 = [],\n\t\t\t\ti32idx = {};\n\n\t\t\tfor (var j = 0, i = 0; j < this.idxrgb.length; j++) {\n\t\t\t\tif (this.idxrgb[j]) {\n\t\t\t\t\ti32 = this.idxi32[j];\n\t\t\t\t\tidxrgb[i] = this.idxrgb[j];\n\t\t\t\t\ti32idx[i32] = i;\n\t\t\t\t\tidxi32[i] = i32;\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.idxrgb = idxrgb;\n\t\t\tthis.idxi32 = idxi32;\n\t\t\tthis.i32idx = i32idx;\n\t\t}\n\t};\n\n\t// reduces similar colors from an importance-sorted Uint32 rgba array\n\tRgbQuant.prototype.reducePal = function reducePal(idxi32) {\n\t\t// if pre-defined palette's length exceeds target\n\t\tif (this.idxrgb.length > this.colors) {\n\t\t\t// quantize histogram to existing palette\n\t\t\tvar len = idxi32.length, keep = {}, uniques = 0, idx, pruned = false;\n\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\t// palette length reached, unset all remaining colors (sparse palette)\n\t\t\t\tif (uniques == this.colors && !pruned) {\n\t\t\t\t\tthis.prunePal(keep);\n\t\t\t\t\tpruned = true;\n\t\t\t\t}\n\n\t\t\t\tidx = this.nearestIndex(idxi32[i]);\n\n\t\t\t\tif (uniques < this.colors && !keep[idx]) {\n\t\t\t\t\tkeep[idx] = true;\n\t\t\t\t\tuniques++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!pruned) {\n\t\t\t\tthis.prunePal(keep);\n\t\t\t\tpruned = true;\n\t\t\t}\n\t\t}\n\t\t// reduce histogram to create initial palette\n\t\telse {\n\t\t\t// build full rgb palette\n\t\t\tvar idxrgb = idxi32.map(function(i32) {\n\t\t\t\treturn [\n\t\t\t\t\t(i32 & 0xff),\n\t\t\t\t\t(i32 & 0xff00) >> 8,\n\t\t\t\t\t(i32 & 0xff0000) >> 16,\n\t\t\t\t];\n\t\t\t});\n\n\t\t\tvar len = idxrgb.length,\n\t\t\t\tpalLen = len,\n\t\t\t\tthold = this.initDist;\n\n\t\t\t// palette already at or below desired length\n\t\t\tif (palLen > this.colors) {\n\t\t\t\twhile (palLen > this.colors) {\n\t\t\t\t\tvar memDist = [];\n\n\t\t\t\t\t// iterate palette\n\t\t\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\t\t\tvar pxi = idxrgb[i], i32i = idxi32[i];\n\t\t\t\t\t\tif (!pxi) continue;\n\n\t\t\t\t\t\tfor (var j = i + 1; j < len; j++) {\n\t\t\t\t\t\t\tvar pxj = idxrgb[j], i32j = idxi32[j];\n\t\t\t\t\t\t\tif (!pxj) continue;\n\n\t\t\t\t\t\t\tvar dist = this.colorDist(pxi, pxj);\n\n\t\t\t\t\t\t\tif (dist < thold) {\n\t\t\t\t\t\t\t\t// store index,rgb,dist\n\t\t\t\t\t\t\t\tmemDist.push([j, pxj, i32j, dist]);\n\n\t\t\t\t\t\t\t\t// kill squashed value\n\t\t\t\t\t\t\t\tdelete(idxrgb[j]);\n\t\t\t\t\t\t\t\tpalLen--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// palette reduction pass\n\t\t\t\t\t// console.log(\"palette length: \" + palLen);\n\n\t\t\t\t\t// if palette is still much larger than target, increment by larger initDist\n\t\t\t\t\tthold += (palLen > this.colors * 3) ? this.initDist : this.distIncr;\n\t\t\t\t}\n\n\t\t\t\t// if palette is over-reduced, re-add removed colors with largest distances from last round\n\t\t\t\tif (palLen < this.colors) {\n\t\t\t\t\t// sort descending\n\t\t\t\t\tsort.call(memDist, function(a,b) {\n\t\t\t\t\t\treturn b[3] - a[3];\n\t\t\t\t\t});\n\n\t\t\t\t\tvar k = 0;\n\t\t\t\t\twhile (palLen < this.colors) {\n\t\t\t\t\t\t// re-inject rgb into final palette\n\t\t\t\t\t\tidxrgb[memDist[k][0]] = memDist[k][1];\n\n\t\t\t\t\t\tpalLen++;\n\t\t\t\t\t\tk++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar len = idxrgb.length;\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tif (!idxrgb[i]) continue;\n\n\t\t\t\tthis.idxrgb.push(idxrgb[i]);\n\t\t\t\tthis.idxi32.push(idxi32[i]);\n\n\t\t\t\tthis.i32idx[idxi32[i]] = this.idxi32.length - 1;\n\t\t\t\tthis.i32rgb[idxi32[i]] = idxrgb[i];\n\t\t\t}\n\t\t}\n\t};\n\n\t// global top-population\n\tRgbQuant.prototype.colorStats1D = function colorStats1D(buf32) {\n\t\tvar histG = this.histogram,\n\t\t\tnum = 0, col,\n\t\t\tlen = buf32.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tcol = buf32[i];\n\n\t\t\t// skip transparent\n\t\t\tif ((col & 0xff000000) >> 24 == 0) continue;\n\n\t\t\t// collect hue stats\n\t\t\tif (this.hueStats)\n\t\t\t\tthis.hueStats.check(col);\n\n\t\t\tif (col in histG)\n\t\t\t\thistG[col]++;\n\t\t\telse\n\t\t\t\thistG[col] = 1;\n\t\t}\n\t};\n\n\t// population threshold within subregions\n\t// FIXME: this can over-reduce (few/no colors same?), need a way to keep\n\t// important colors that dont ever reach local thresholds (gradients?)\n\tRgbQuant.prototype.colorStats2D = function colorStats2D(buf32, width) {\n\t\tvar boxW = this.boxSize[0],\n\t\t\tboxH = this.boxSize[1],\n\t\t\tarea = boxW * boxH,\n\t\t\tboxes = makeBoxes(width, buf32.length / width, boxW, boxH),\n\t\t\thistG = this.histogram,\n\t\t\tself = this;\n\n\t\tboxes.forEach(function(box) {\n\t\t\tvar effc = Math.max(Math.round((box.w * box.h) / area) * self.boxPxls, 2),\n\t\t\t\thistL = {}, col;\n\n\t\t\titerBox(box, width, function(i) {\n\t\t\t\tcol = buf32[i];\n\n\t\t\t\t// skip transparent\n\t\t\t\tif ((col & 0xff000000) >> 24 == 0) return;\n\n\t\t\t\t// collect hue stats\n\t\t\t\tif (self.hueStats)\n\t\t\t\t\tself.hueStats.check(col);\n\n\t\t\t\tif (col in histG)\n\t\t\t\t\thistG[col]++;\n\t\t\t\telse if (col in histL) {\n\t\t\t\t\tif (++histL[col] >= effc)\n\t\t\t\t\t\thistG[col] = histL[col];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\thistL[col] = 1;\n\t\t\t});\n\t\t});\n\n\t\tif (this.hueStats)\n\t\t\tthis.hueStats.inject(histG);\n\t};\n\n\t// TODO: group very low lum and very high lum colors\n\t// TODO: pass custom sort order\n\tRgbQuant.prototype.sortPal = function sortPal() {\n\t\tvar self = this;\n\n\t\tthis.idxi32.sort(function(a,b) {\n\t\t\tvar idxA = self.i32idx[a],\n\t\t\t\tidxB = self.i32idx[b],\n\t\t\t\trgbA = self.idxrgb[idxA],\n\t\t\t\trgbB = self.idxrgb[idxB];\n\n\t\t\tvar hslA = rgb2hsl(rgbA[0],rgbA[1],rgbA[2]),\n\t\t\t\thslB = rgb2hsl(rgbB[0],rgbB[1],rgbB[2]);\n\n\t\t\t// sort all grays + whites together\n\t\t\tvar hueA = (rgbA[0] == rgbA[1] && rgbA[1] == rgbA[2]) ? -1 : hueGroup(hslA.h, self.hueGroups);\n\t\t\tvar hueB = (rgbB[0] == rgbB[1] && rgbB[1] == rgbB[2]) ? -1 : hueGroup(hslB.h, self.hueGroups);\n\n\t\t\tvar hueDiff = hueB - hueA;\n\t\t\tif (hueDiff) return -hueDiff;\n\n\t\t\tvar lumDiff = lumGroup(+hslB.l.toFixed(2)) - lumGroup(+hslA.l.toFixed(2));\n\t\t\tif (lumDiff) return -lumDiff;\n\n\t\t\tvar satDiff = satGroup(+hslB.s.toFixed(2)) - satGroup(+hslA.s.toFixed(2));\n\t\t\tif (satDiff) return -satDiff;\n\t\t});\n\n\t\t// sync idxrgb & i32idx\n\t\tthis.idxi32.forEach(function(i32, i) {\n\t\t\tself.idxrgb[i] = self.i32rgb[i32];\n\t\t\tself.i32idx[i32] = i;\n\t\t});\n\t};\n\n\t// TOTRY: use HUSL - http://boronine.com/husl/\n\tRgbQuant.prototype.nearestColor = function nearestColor(i32) {\n\t\tvar idx = this.nearestIndex(i32);\n\t\treturn idx === null ? 0 : this.idxi32[idx];\n\t};\n\n\t// TOTRY: use HUSL - http://boronine.com/husl/\n\tRgbQuant.prototype.nearestIndex = function nearestIndex(i32) {\n\t\t// alpha 0 returns null index\n\t\tif ((i32 & 0xff000000) >> 24 == 0)\n\t\t\treturn null;\n\n\t\tif (this.useCache && (\"\"+i32) in this.i32idx)\n\t\t\treturn this.i32idx[i32];\n\n\t\tvar min = 1000,\n\t\t\tidx,\n\t\t\trgb = [\n\t\t\t\t(i32 & 0xff),\n\t\t\t\t(i32 & 0xff00) >> 8,\n\t\t\t\t(i32 & 0xff0000) >> 16,\n\t\t\t],\n\t\t\tlen = this.idxrgb.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tif (!this.idxrgb[i]) continue;\t\t// sparse palettes\n\n\t\t\tvar dist = this.colorDist(rgb, this.idxrgb[i]);\n\n\t\t\tif (dist < min) {\n\t\t\t\tmin = dist;\n\t\t\t\tidx = i;\n\t\t\t}\n\t\t}\n\n\t\treturn idx;\n\t};\n\n\tRgbQuant.prototype.cacheHistogram = function cacheHistogram(idxi32) {\n\t\tfor (var i = 0, i32 = idxi32[i]; i < idxi32.length && this.histogram[i32] >= this.cacheFreq; i32 = idxi32[i++])\n\t\t\tthis.i32idx[i32] = this.nearestIndex(i32);\n\t};\n\n\tfunction HueStats(numGroups, minCols) {\n\t\tthis.numGroups = numGroups;\n\t\tthis.minCols = minCols;\n\t\tthis.stats = {};\n\n\t\tfor (var i = -1; i < numGroups; i++)\n\t\t\tthis.stats[i] = {num: 0, cols: []};\n\n\t\tthis.groupsFull = 0;\n\t}\n\n\tHueStats.prototype.check = function checkHue(i32) {\n\t\tif (this.groupsFull == this.numGroups + 1)\n\t\t\tthis.check = function() {return;};\n\n\t\tvar r = (i32 & 0xff),\n\t\t\tg = (i32 & 0xff00) >> 8,\n\t\t\tb = (i32 & 0xff0000) >> 16,\n\t\t\thg = (r == g && g == b) ? -1 : hueGroup(rgb2hsl(r,g,b).h, this.numGroups),\n\t\t\tgr = this.stats[hg],\n\t\t\tmin = this.minCols;\n\n\t\tgr.num++;\n\n\t\tif (gr.num > min)\n\t\t\treturn;\n\t\tif (gr.num == min)\n\t\t\tthis.groupsFull++;\n\n\t\tif (gr.num <= min)\n\t\t\tthis.stats[hg].cols.push(i32);\n\t};\n\n\tHueStats.prototype.inject = function injectHues(histG) {\n\t\tfor (var i = -1; i < this.numGroups; i++) {\n\t\t\tif (this.stats[i].num <= this.minCols) {\n\t\t\t\tswitch (typeOf(histG)) {\n\t\t\t\t\tcase \"Array\":\n\t\t\t\t\t\tthis.stats[i].cols.forEach(function(col){\n\t\t\t\t\t\t\tif (histG.indexOf(col) == -1)\n\t\t\t\t\t\t\t\thistG.push(col);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Object\":\n\t\t\t\t\t\tthis.stats[i].cols.forEach(function(col){\n\t\t\t\t\t\t\tif (!histG[col])\n\t\t\t\t\t\t\t\thistG[col] = 1;\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\thistG[col]++;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t// Rec. 709 (sRGB) luma coef\n\tvar Pr = .2126,\n\t\tPg = .7152,\n\t\tPb = .0722;\n\n\t// http://alienryderflex.com/hsp.html\n\tfunction rgb2lum(r,g,b) {\n\t\treturn Math.sqrt(\n\t\t\tPr * r*r +\n\t\t\tPg * g*g +\n\t\t\tPb * b*b\n\t\t);\n\t}\n\n\tvar rd = 255,\n\t\tgd = 255,\n\t\tbd = 255;\n\n\tvar euclMax = Math.sqrt(Pr*rd*rd + Pg*gd*gd + Pb*bd*bd);\n\t// perceptual Euclidean color distance\n\tfunction distEuclidean(rgb0, rgb1) {\n\t\tvar rd = rgb1[0]-rgb0[0],\n\t\t\tgd = rgb1[1]-rgb0[1],\n\t\t\tbd = rgb1[2]-rgb0[2];\n\n\t\treturn Math.sqrt(Pr*rd*rd + Pg*gd*gd + Pb*bd*bd) / euclMax;\n\t}\n\n\tvar manhMax = Pr*rd + Pg*gd + Pb*bd;\n\t// perceptual Manhattan color distance\n\tfunction distManhattan(rgb0, rgb1) {\n\t\tvar rd = Math.abs(rgb1[0]-rgb0[0]),\n\t\t\tgd = Math.abs(rgb1[1]-rgb0[1]),\n\t\t\tbd = Math.abs(rgb1[2]-rgb0[2]);\n\n\t\treturn (Pr*rd + Pg*gd + Pb*bd) / manhMax;\n\t}\n\n\t// http://rgb2hsl.nichabi.com/javascript-function.php\n\tfunction rgb2hsl(r, g, b) {\n\t\tvar max, min, h, s, l, d;\n\t\tr /= 255;\n\t\tg /= 255;\n\t\tb /= 255;\n\t\tmax = Math.max(r, g, b);\n\t\tmin = Math.min(r, g, b);\n\t\tl = (max + min) / 2;\n\t\tif (max == min) {\n\t\t\th = s = 0;\n\t\t} else {\n\t\t\td = max - min;\n\t\t\ts = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\t\t\tswitch (max) {\n\t\t\t\tcase r: h = (g - b) / d + (g < b ? 6 : 0); break;\n\t\t\t\tcase g:\th = (b - r) / d + 2; break;\n\t\t\t\tcase b:\th = (r - g) / d + 4; break\n\t\t\t}\n\t\t\th /= 6;\n\t\t}\n//\t\th = Math.floor(h * 360)\n//\t\ts = Math.floor(s * 100)\n//\t\tl = Math.floor(l * 100)\n\t\treturn {\n\t\t\th: h,\n\t\t\ts: s,\n\t\t\tl: rgb2lum(r,g,b),\n\t\t};\n\t}\n\n\tfunction hueGroup(hue, segs) {\n\t\tvar seg = 1/segs,\n\t\t\thaf = seg/2;\n\n\t\tif (hue >= 1 - haf || hue <= haf)\n\t\t\treturn 0;\n\n\t\tfor (var i = 1; i < segs; i++) {\n\t\t\tvar mid = i*seg;\n\t\t\tif (hue >= mid - haf && hue <= mid + haf)\n\t\t\t\treturn i;\n\t\t}\n\t}\n\n\tfunction satGroup(sat) {\n\t\treturn sat;\n\t}\n\n\tfunction lumGroup(lum) {\n\t\treturn lum;\n\t}\n\n\tfunction typeOf(val) {\n\t\treturn Object.prototype.toString.call(val).slice(8,-1);\n\t}\n\n\tvar sort = isArrSortStable() ? Array.prototype.sort : stableSort;\n\n\t// must be used via stableSort.call(arr, fn)\n\tfunction stableSort(fn) {\n\t\tvar type = typeOf(this[0]);\n\n\t\tif (type == \"Number\" || type == \"String\") {\n\t\t\tvar ord = {}, len = this.length, val;\n\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tval = this[i];\n\t\t\t\tif (ord[val] || ord[val] === 0) continue;\n\t\t\t\tord[val] = i;\n\t\t\t}\n\n\t\t\treturn this.sort(function(a,b) {\n\t\t\t\treturn fn(a,b) || ord[a] - ord[b];\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tvar ord = this.map(function(v){return v});\n\n\t\t\treturn this.sort(function(a,b) {\n\t\t\t\treturn fn(a,b) || ord.indexOf(a) - ord.indexOf(b);\n\t\t\t});\n\t\t}\n\t}\n\n\t// test if js engine's Array#sort implementation is stable\n\tfunction isArrSortStable() {\n\t\tvar str = \"abcdefghijklmnopqrstuvwxyz\";\n\n\t\treturn \"xyzvwtursopqmnklhijfgdeabc\" == str.split(\"\").sort(function(a,b) {\n\t\t\treturn ~~(str.indexOf(b)/2.3) - ~~(str.indexOf(a)/2.3);\n\t\t}).join(\"\");\n\t}\n\n\t// returns uniform pixel data from various img\n\t// TODO?: if array is passed, createimagedata, createlement canvas? take a pxlen?\n\tfunction getImageData(img, width) {\n\t\tvar can, ctx, imgd, buf8, buf32, height;\n\n\t\tswitch (typeOf(img)) {\n\t\t\tcase \"HTMLImageElement\":\n\t\t\t\tcan = document.createElement(\"canvas\");\n\t\t\t\tcan.width = img.naturalWidth;\n\t\t\t\tcan.height = img.naturalHeight;\n\t\t\t\tctx = can.getContext(\"2d\");\n\t\t\t\tctx.drawImage(img,0,0);\n\t\t\tcase \"Canvas\":\n\t\t\tcase \"HTMLCanvasElement\":\n\t\t\t\tcan = can || img;\n\t\t\t\tctx = ctx || can.getContext(\"2d\");\n\t\t\tcase \"CanvasRenderingContext2D\":\n\t\t\t\tctx = ctx || img;\n\t\t\t\tcan = can || ctx.canvas;\n\t\t\t\timgd = ctx.getImageData(0, 0, can.width, can.height);\n\t\t\tcase \"ImageData\":\n\t\t\t\timgd = imgd || img;\n\t\t\t\twidth = imgd.width;\n\t\t\t\tif (typeOf(imgd.data) == \"CanvasPixelArray\")\n\t\t\t\t\tbuf8 = new Uint8Array(imgd.data);\n\t\t\t\telse\n\t\t\t\t\tbuf8 = imgd.data;\n\t\t\tcase \"Array\":\n\t\t\tcase \"CanvasPixelArray\":\n\t\t\t\tbuf8 = buf8 || new Uint8Array(img);\n\t\t\tcase \"Uint8Array\":\n\t\t\tcase \"Uint8ClampedArray\":\n\t\t\t\tbuf8 = buf8 || img;\n\t\t\t\tbuf32 = new Uint32Array(buf8.buffer);\n\t\t\tcase \"Uint32Array\":\n\t\t\t\tbuf32 = buf32 || img;\n\t\t\t\tbuf8 = buf8 || new Uint8Array(buf32.buffer);\n\t\t\t\twidth = width || buf32.length;\n\t\t\t\theight = buf32.length / width;\n\t\t}\n\n\t\treturn {\n\t\t\tcan: can,\n\t\t\tctx: ctx,\n\t\t\timgd: imgd,\n\t\t\tbuf8: buf8,\n\t\t\tbuf32: buf32,\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t};\n\t}\n\n\t// partitions a rect of wid x hgt into\n\t// array of bboxes of w0 x h0 (or less)\n\tfunction makeBoxes(wid, hgt, w0, h0) {\n\t\tvar wnum = ~~(wid/w0), wrem = wid%w0,\n\t\t\thnum = ~~(hgt/h0), hrem = hgt%h0,\n\t\t\txend = wid-wrem, yend = hgt-hrem;\n\n\t\tvar bxs = [];\n\t\tfor (var y = 0; y < hgt; y += h0)\n\t\t\tfor (var x = 0; x < wid; x += w0)\n\t\t\t\tbxs.push({x:x, y:y, w:(x==xend?wrem:w0), h:(y==yend?hrem:h0)});\n\n\t\treturn bxs;\n\t}\n\n\t// iterates @bbox within a parent rect of width @wid; calls @fn, passing index within parent\n\tfunction iterBox(bbox, wid, fn) {\n\t\tvar b = bbox,\n\t\t\ti0 = b.y * wid + b.x,\n\t\t\ti1 = (b.y + b.h - 1) * wid + (b.x + b.w - 1),\n\t\t\tcnt = 0, incr = wid - b.w + 1, i = i0;\n\n\t\tdo {\n\t\t\tfn.call(this, i);\n\t\t\ti += (++cnt % b.w == 0) ? incr : 1;\n\t\t} while (i <= i1);\n\t}\n\n\t// returns array of hash keys sorted by their values\n\tfunction sortedHashKeys(obj, desc) {\n\t\tvar keys = [];\n\n\t\tfor (var key in obj)\n\t\t\tkeys.push(key);\n\n\t\treturn sort.call(keys, function(a,b) {\n\t\t\treturn desc ? obj[b] - obj[a] : obj[a] - obj[b];\n\t\t});\n\t}\n\n\t// expose\n\tthis.RgbQuant = RgbQuant;\n\n\t// expose to commonJS\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = RgbQuant;\n\t}\n\n}).call(this);","\ntype Palette = number[][];\n\ninterface Brush {\n  paint(ctx: CanvasRenderingContext2D, palette: Palette): void;\n}\n\nfunction getRandomColor(palette: Palette) {\n  if (palette.length > 0) {\n    const num = palette[Math.floor(Math.random() * palette.length)];\n    return `rgb(${num[0]},${num[1]},${num[2]})`;\n    //console.log(num.toString(16));\n    // let str = num.toString(16);\n    // // abgr --> rgb\n    // str = str.substr(6, 2) + str.substr(4, 2) + str.substr(2, 2);\n    // return \"#\" + str;\n  } else {\n    var letters = \"0123456789ABCDEF\";\n    var color = \"#\";\n    for (var i = 0; i < 6; i++) {\n      color += letters[Math.floor(Math.random() * 16)];\n    }\n    return color;\n  }\n}\n\nclass Pointillist implements Brush {\n  paint(ctx: CanvasRenderingContext2D, palette: Palette) {\n    ctx.fillStyle = getRandomColor(palette);\n    //ctx.globalAlpha = 0.4 + Math.random() * 0.6;\n\n    const x = Math.random() * ctx.canvas.width;\n    const y = Math.random() * ctx.canvas.height;\n    const rx = Math.random() * ctx.canvas.width * 0.03125;\n    const ry = rx;\n    ctx.beginPath();\n    ctx.ellipse(x, y, rx, ry, 0, 0, 2 * Math.PI);\n    ctx.fill();\n  }\n}\n\nclass Round implements Brush {\n  paint(ctx: CanvasRenderingContext2D, palette: Palette) {\n    ctx.fillStyle = getRandomColor(palette);\n    //ctx.globalAlpha = 0.4 + Math.random() * 0.6;\n\n    const x = Math.random() * ctx.canvas.width;\n    const y = Math.random() * ctx.canvas.height;\n    const rx = Math.random() * ctx.canvas.width * 0.125;\n    const ry = Math.random() * ctx.canvas.height * 0.125;\n    const rot = Math.random() * Math.PI;\n    ctx.beginPath();\n    ctx.ellipse(x, y, rx, ry, rot, 0, 2 * Math.PI);\n    ctx.fill();\n  }\n}\n\nclass Box implements Brush {\n  paint(ctx: CanvasRenderingContext2D, palette: Palette) {\n    ctx.fillStyle = getRandomColor(palette);\n    const x = Math.random() * ctx.canvas.width;\n    const y = Math.random() * ctx.canvas.height;\n    const rx = Math.random() * ctx.canvas.width * 0.25;\n    const ry = Math.random() * ctx.canvas.height * 0.25;\n    ctx.beginPath();\n    ctx.fillRect(x, y, rx, ry);\n  }\n}\n\nclass SmallRound implements Brush {\n  paint(ctx: CanvasRenderingContext2D, palette: Palette) {\n    ctx.fillStyle = getRandomColor(palette);\n\n    const x = Math.random() * ctx.canvas.width;\n    const y = Math.random() * ctx.canvas.height;\n    const rx = ctx.canvas.width * 0.025;\n    const ry = Math.random() * ctx.canvas.height * 0.25;\n    const rot = Math.random() * Math.PI;\n    ctx.beginPath();\n    ctx.ellipse(x, y, rx, ry, rot, 0, 2 * Math.PI);\n    ctx.fill();\n  }\n}\n\nclass BoxStrips implements Brush {\n  paint(ctx: CanvasRenderingContext2D, palette: Palette) {\n    ctx.fillStyle = getRandomColor(palette);\n\n    const x = Math.random() * ctx.canvas.width;\n    const y = Math.random() * ctx.canvas.height;\n    let rx = 0;\n    let ry = 0;\n    if (Math.random() > 0.49999999) {\n      rx = ctx.canvas.width * 0.025;\n      ry = Math.random() * ctx.canvas.height * 0.25;\n    } else {\n      ry = ctx.canvas.height * 0.025;\n      rx = Math.random() * ctx.canvas.width * 0.25;\n    }\n    ctx.beginPath();\n    ctx.fillRect(x, y, rx, ry);\n  }\n}\n\nconst brushes: Brush[] = [\n  new Round(),\n  new Pointillist(),\n  new Box(),\n  new BoxStrips(),\n];\nexport { brushes };\nexport { Brush };\nexport { Palette };\n","import * as dat from \"dat.gui\";\nimport RgbQuant from \"rgbquant\";\n\nimport compare from \"./comparator\";\nimport { brushes, Brush, Palette } from \"./brush\";\n\nconst imageChoices = {\n  \"American Gothic\":\n    \"https://upload.wikimedia.org/wikipedia/commons/c/cc/Grant_Wood_-_American_Gothic_-_Google_Art_Project.jpg\",\n  \"Mona Lisa\":\n    \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/ec/Mona_Lisa%2C_by_Leonardo_da_Vinci%2C_from_C2RMF_retouched.jpg/1280px-Mona_Lisa%2C_by_Leonardo_da_Vinci%2C_from_C2RMF_retouched.jpg\",\n  \"Bedroom In Arles\":\n    \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/76/Vincent_van_Gogh_-_De_slaapkamer_-_Google_Art_Project.jpg/2560px-Vincent_van_Gogh_-_De_slaapkamer_-_Google_Art_Project.jpg\",\n  \"Persistence of Memory\":\n    \"https://images2.minutemediacdn.com/image/upload/c_fill,g_auto,h_1248,w_2220/f_auto,q_auto,w_1100/v1554925323/shape/mentalfloss/clocks_1.png\",\n  \"The Shoemaker\":\n    \"https://uploads6.wikiart.org/images/jacob-lawrence/the-shoemaker-1945(1).jpg\",\n  \"Sharbat Gula\":\n    \"https://upload.wikimedia.org/wikipedia/en/b/b4/Sharbat_Gula.jpg\",\n  \"Larry Bird\":\n    \"https://upload.wikimedia.org/wikipedia/commons/2/2f/Larry_Bird_Lipofsky.jpg\",\n};\n\nconst CANVAS_SIZE = 300;\nconst NO_PALETTE = [];\n\nclass PainterApp {\n  private statsEl: HTMLParagraphElement;\n  private image1: HTMLCanvasElement;\n  private image2: HTMLCanvasElement;\n  private imageTemp: HTMLCanvasElement;\n  private srcimg: HTMLImageElement;\n  private sourcePixels: ImageData;\n  private similarity: number;\n  private palette: Palette;\n  private numStrokesKept: number;\n  private numStrokesTried: number;\n  private play: boolean;\n  private gui: any;\n  private guiState: {\n    alpha0: number;\n    alpha1: number;\n    brush: number;\n    image: string;\n    usePalette: boolean;\n  };\n  private brush: Brush;\n  private animationId: number;\n\n  public constructor() {\n    this.play = false;\n    this.animationId = 0;\n    this.gui = new dat.GUI();\n    this.guiState = {\n      brush: 0,\n      image: imageChoices[\"American Gothic\"],\n      usePalette: true,\n      alpha0: 1,\n      alpha1: 1,\n    };\n    this.brush = brushes[0];\n    this.numStrokesTried = 0;\n    this.numStrokesKept = 0;\n    this.palette = [];\n    this.similarity = Number.MAX_VALUE;\n    this.image1 = document.createElement(\"canvas\");\n    this.imageTemp = document.createElement(\"canvas\");\n    this.image2 = document.createElement(\"canvas\");\n    this.statsEl = document.createElement(\"p\");\n    document.body.appendChild(this.image1);\n    document.body.appendChild(this.image2);\n    document.body.appendChild(this.statsEl);\n    this.srcimg = new Image();\n    //this.srcimg.crossOrigin = \"Anonymous\";\n    this.srcimg.setAttribute(\"crossOrigin\", \"\");\n    this.srcimg.onload = this.start.bind(this);\n    this.srcimg.crossOrigin = \"\";\n    this.srcimg.src = imageChoices[\"American Gothic\"];\n    this.sourcePixels = this.image2\n      .getContext(\"2d\")\n      .createImageData(this.image2.width, this.image2.height);\n    this.iterate = this.iterate.bind(this);\n    this.setupGui();\n  }\n\n  public start() {\n    this.play = false;\n\n    const w = this.srcimg.naturalWidth;\n    const h = this.srcimg.naturalHeight;\n    const a = w / h;\n    let tgtw = CANVAS_SIZE;\n    let tgth = CANVAS_SIZE / a;\n    if (a > 1) {\n      tgth = CANVAS_SIZE;\n      tgtw = CANVAS_SIZE * a;\n    }\n    const ws = \"\" + tgtw + \"px\";\n    const hs = \"\" + tgth + \"px\";\n    this.image1.style.width = ws;\n    this.image1.style.height = hs;\n    this.image1.width = tgtw;\n    this.image1.height = tgth;\n    this.imageTemp.style.width = ws;\n    this.imageTemp.style.height = hs;\n    this.imageTemp.width = tgtw;\n    this.imageTemp.height = tgth;\n    this.image2.style.width = ws;\n    this.image2.style.height = hs;\n    this.image2.width = tgtw;\n    this.image2.height = tgth;\n\n    const ctx = this.image2.getContext(\"2d\");\n\n    // put our reference image into the srcimg canvas\n    ctx.drawImage(\n      this.srcimg,\n      0,\n      0,\n      this.srcimg.naturalWidth,\n      this.srcimg.naturalHeight,\n      0,\n      0,\n      this.image2.width,\n      this.image2.height\n    );\n    // convert\n    const self = this;\n    setTimeout(() => {\n      const pctx = self.image2.getContext(\"2d\");\n      // now grab the downsampled pixels and hold onto them\n      self.sourcePixels = pctx.getImageData(\n        0,\n        0,\n        this.image2.width,\n        this.image2.height\n      );\n\n      // options with defaults (not required)\n      const opts = {\n        colors: 256, // desired palette size\n        method: 2, // histogram method, 2: min-population threshold within subregions; 1: global top-population\n        boxSize: [64, 64], // subregion dims (if method = 2)\n        boxPxls: 2, // min-population threshold (if method = 2)\n        initColors: 4096, // # of top-occurring colors  to start with (if method = 1)\n        minHueCols: 0, // # of colors per hue group to evaluate regardless of counts, to retain low-count hues\n        dithKern: null, // dithering kernel name, see available kernels in docs below\n        dithDelta: 0, // dithering threshhold (0-1) e.g: 0.05 will not dither colors with <= 5% difference\n        dithSerp: false, // enable serpentine pattern dithering\n        palette: [], // a predefined palette to start with in r,g,b tuple format: [[r,g,b],[r,g,b]...]\n        reIndex: false, // affects predefined palettes only. if true, allows compacting of sparsed palette once target palette size is reached. also enables palette sorting.\n        useCache: true, // enables caching for perf usually, but can reduce perf in some cases, like pre-def palettes\n        cacheFreq: 10, // min color occurance count needed to qualify for caching\n        colorDist: \"euclidean\", // method used to determine color distance, can also be \"manhattan\"\n      };\n\n      const q = new RgbQuant(opts);\n\n      // analyze histograms\n      q.sample(self.sourcePixels);\n\n      // build palette\n      self.palette = q.palette(true);\n\n      //      self.palette = palette(self.sourcePixels.data, 256, 2);\n\n      self.restartPainting();\n    }, 0);\n  }\n\n  private restartPainting() {\n    // stop any current rendering\n    //clearTimeout(this.animationId);\n    cancelAnimationFrame(this.animationId);\n    this.animationId = 0;\n\n    // clear the canvas\n    const context = this.image1.getContext(\"2d\");\n    context.clearRect(0, 0, this.image1.width, this.image1.height);\n    const context2 = this.imageTemp.getContext(\"2d\");\n    context2.clearRect(0, 0, this.imageTemp.width, this.imageTemp.height);\n\n    // now we can start painting!\n    this.numStrokesTried = 0;\n    this.numStrokesKept = 0;\n    this.similarity = Number.MAX_VALUE;\n\n    this.play = true;\n    this.iterate();\n  }\n\n  private setupGui() {\n    this.gui\n      .add(this.guiState, \"image\", imageChoices)\n      .name(\"Image\")\n      .onChange((value) => {\n        this.play = false;\n        //clearTimeout(this.animationId);\n        cancelAnimationFrame(this.animationId);\n        this.animationId = 0;\n        // initiate load of new image\n        this.srcimg.src = value;\n      });\n\n    this.gui.add(this.guiState, \"usePalette\").name(\"Limit Palette\");\n    this.gui\n      .add(this.guiState, \"brush\", {\n        Round: 0,\n        Pointillist: 1,\n        Boxy: 2,\n        Strips: 3,\n      })\n      .name(\"Brush\")\n      .onChange((value) => {\n        this.brush = brushes[value];\n      });\n\n    this.gui.add(this.guiState, \"alpha0\", 0, 1).name(\"Opacity Min\");\n    this.gui.add(this.guiState, \"alpha1\", 0, 1).name(\"Opacity Max\");\n\n    this.gui.add(this, \"restartPainting\").name(\"Restart\");\n  }\n\n  private brushStroke(cvs: HTMLCanvasElement, brush: Brush, palette: Palette) {\n    const ctx = cvs.getContext(\"2d\");\n    ctx.globalAlpha =\n      Math.random() * Math.abs(this.guiState.alpha1 - this.guiState.alpha0) +\n      Math.min(this.guiState.alpha0, this.guiState.alpha1);\n    brush.paint(ctx, palette);\n    return ctx.getImageData(0, 0, cvs.width, cvs.height);\n  }\n\n  private iterate() {\n    this.numStrokesTried += 1;\n    // 1. paint a brush stroke on imageTemp\n    const testimage = this.brushStroke(\n      this.imageTemp,\n      this.brush,\n      this.guiState.usePalette ? this.palette : NO_PALETTE\n    );\n\n    // 2. compare images\n    const newdiff = compare(testimage, this.sourcePixels);\n    //console.log(newdiff);\n\n    // 3. if new distance is less than previous distance,\n    //    keep the new image\n    if (newdiff < this.similarity) {\n      this.similarity = newdiff;\n      // copy temp image into image1\n      var destCtx = this.image1.getContext(\"2d\");\n      destCtx.globalCompositeOperation = \"copy\";\n      destCtx.drawImage(this.imageTemp, 0, 0);\n      //      destCtx.globalCompositeOperation = \"source-over\";\n\n      this.numStrokesKept += 1;\n    }\n    // 4. else don't\n    else {\n      // copy image1 into temp image\n      var destCtx = this.imageTemp.getContext(\"2d\");\n      //destCtx.globalCompositeOperation = \"copy\";\n      destCtx.drawImage(this.image1, 0, 0);\n      //      destCtx.globalCompositeOperation = \"source-over\";\n    }\n\n    const TARGET = 0.1;\n    if (this.play && this.similarity > TARGET) {\n      this.updateStats();\n      this.animationId = requestAnimationFrame(this.iterate);\n    }\n  }\n\n  private updateStats() {\n    if (this.numStrokesTried % 100 === 0) {\n      // update the text readout.\n      this.statsEl.innerText =\n        \"Brushstrokes: \" +\n        this.numStrokesKept +\n        \"/\" +\n        this.numStrokesTried +\n        \"=\" +\n        this.numStrokesKept / this.numStrokesTried +\n        \"\\nSimilarity: \" +\n        this.similarity;\n    }\n  }\n}\n\nconst mypainter = new PainterApp();\n","function c1(a: ImageData, b: ImageData): number {\n  let dist = 0;\n  let dr, dg, db;\n  for (let i = 0; i < a.data.length; i += 4) {\n    dr = a.data[i] / 255.0 - b.data[i] / 255.0;\n    dist += dr * dr;\n    dg = a.data[i + 1] / 255.0 - b.data[i + 1] / 255.0;\n    dist += dg * dg;\n    db = a.data[i + 2] / 255.0 - b.data[i + 2] / 255.0;\n    dist += db * db;\n  }\n  return dist;\n}\n\nexport default function compare(a: ImageData, b: ImageData): number {\n  return c1(a, b);\n}\n"],"names":["HMR_HOST","HMR_PORT","HMR_SECURE","HMR_ENV_HASH","module","bundle","HMR_BUNDLE_ID","OVERLAY_ID","OldModule","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","undefined","checkedAssets","acceptedAssets","assetsToAccept","location","protocol","indexOf","hostname","port","parent","isParcelRequire","WebSocket","getHostname","getPort","test","ws","onmessage","event","JSON","parse","type","removeErrorOverlay","assets","filter","asset","envHash","handled","forEach","didAccept","hmrAcceptCheck","root","id","depsByBundle","console","clear","hmrApply","i","length","hmrAcceptRun","window","reload","ansiDiagnostic","diagnostics","ansi","stack","codeframe","error","message","hints","join","overlay","createErrorOverlay","html","document","body","appendChild","onerror","e","onclose","warn","getElementById","remove","log","createElement","errorHTML","diagnostic","map","hint","innerHTML","modules","parents","k","d","dep","Array","isArray","concat","getParents","link","newLink","cloneNode","onload","parentNode","removeChild","setAttribute","getAttribute","split","Date","now","insertBefore","nextSibling","cssTimeout","setTimeout","links","querySelectorAll","href","servedFromHMRServer","RegExp","absolute","origin","updateLink","reloadCSS","deps","Function","output","cached","cache","some","v","cb","assetsToAlsoAccept","apply","$parcel$interopDefault","a","__esModule","default","$2def4b4391eb108f8996e8ab33dd1f9e$var$colorToString","color","forceCSSHex","colorFormat","__state","conversionName","toString","r","Math","round","g","b","h","s","toFixed","str","hex","$2def4b4391eb108f8996e8ab33dd1f9e$var$ARR_EACH","prototype","$2def4b4391eb108f8996e8ab33dd1f9e$var$ARR_SLICE","slice","$2def4b4391eb108f8996e8ab33dd1f9e$var$Common","BREAK","extend","target","this","each","arguments","obj","isObject","Object","keys","key","isUndefined","bind","defaults","compose","toCall","args","itr","scope","l","_key","defer","fnc","debounce","func","threshold","callImmediately","timeout","delayed","callNow","clearTimeout","toArray","isNull","isNaN","_isNaN","_x","constructor","isNumber","isString","isBoolean","isFunction","$2def4b4391eb108f8996e8ab33dd1f9e$var$INTERPRETATIONS","litmus","conversions","THREE_CHAR_HEX","read","original","match","space","parseInt","write","SIX_CHAR_HEX","CSS_RGB","parseFloat","CSS_RGBA","HEX","RGB_ARRAY","RGBA_ARRAY","RGBA_OBJ","RGB_OBJ","HSVA_OBJ","HSV_OBJ","$2def4b4391eb108f8996e8ab33dd1f9e$var$result","$2def4b4391eb108f8996e8ab33dd1f9e$var$toReturn","$2def4b4391eb108f8996e8ab33dd1f9e$var$interpret","family","conversion","$2def4b4391eb108f8996e8ab33dd1f9e$var$tmpComponent","$2def4b4391eb108f8996e8ab33dd1f9e$var$ColorMath","hsv_to_rgb","hi","floor","f","p","q","t","c","rgb_to_hsv","min","max","delta","NaN","rgb_to_hex","hex_with_component","component_from_hex","componentIndex","value","$2def4b4391eb108f8996e8ab33dd1f9e$var$_typeof","Symbol","iterator","$2def4b4391eb108f8996e8ab33dd1f9e$var$classCallCheck","instance","Constructor","TypeError","$2def4b4391eb108f8996e8ab33dd1f9e$var$createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","$2def4b4391eb108f8996e8ab33dd1f9e$var$get","get","object","property","receiver","desc","getOwnPropertyDescriptor","getPrototypeOf","getter","$2def4b4391eb108f8996e8ab33dd1f9e$var$inherits","subClass","superClass","create","setPrototypeOf","__proto__","$2def4b4391eb108f8996e8ab33dd1f9e$var$possibleConstructorReturn","self","ReferenceError","$2def4b4391eb108f8996e8ab33dd1f9e$var$Color","Color","Error","$2def4b4391eb108f8996e8ab33dd1f9e$var$defineRGBComponent","component","componentHexIndex","recalculateRGB","set","$2def4b4391eb108f8996e8ab33dd1f9e$var$defineHSVComponent","recalculateHSV","result","COMPONENTS","$2def4b4391eb108f8996e8ab33dd1f9e$var$Controller","Controller","initialValue","domElement","__onChange","__onFinishChange","newValue","updateDisplay","getValue","$2def4b4391eb108f8996e8ab33dd1f9e$var$EVENT_MAP_INV","$2def4b4391eb108f8996e8ab33dd1f9e$var$EVENT_MAP","HTMLEvents","MouseEvents","KeyboardEvents","$2def4b4391eb108f8996e8ab33dd1f9e$var$CSS_VALUE_PIXELS","$2def4b4391eb108f8996e8ab33dd1f9e$var$cssValueToPixels","val","$2def4b4391eb108f8996e8ab33dd1f9e$var$dom","makeSelectable","elem","selectable","style","onselectstart","MozUserSelect","KhtmlUserSelect","unselectable","makeFullscreen","hor","vert","vertical","horizontal","position","left","right","top","bottom","fakeEvent","eventType","pars","aux","params","className","evt","createEvent","clientX","x","clientY","y","initMouseEvent","bubbles","cancelable","clickCount","init","initKeyboardEvent","initKeyEvent","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode","initEvent","dispatchEvent","newBool","bool","addEventListener","attachEvent","unbind","removeEventListener","detachEvent","addClass","classes","replace","removeClass","removeAttribute","index","splice","hasClass","getWidth","getComputedStyle","width","getHeight","height","getOffset","el","offset","offsetParent","offsetLeft","offsetTop","isActive","activeElement","$2def4b4391eb108f8996e8ab33dd1f9e$var$BooleanController","_Controller","BooleanController","_this2","_this","__prev","__checkbox","setValue","toReturn","checked","$2def4b4391eb108f8996e8ab33dd1f9e$var$OptionController","OptionController","opts","options","__select","element","opt","desiredValue","selectedIndex","$2def4b4391eb108f8996e8ab33dd1f9e$var$StringController","StringController","onChange","__input","blur","$2def4b4391eb108f8996e8ab33dd1f9e$var$numDecimals","$2def4b4391eb108f8996e8ab33dd1f9e$var$NumberController","NumberController","_params","__min","__max","__step","step","__impliedStep","pow","abs","LN10","__precision","_v","minValue","maxValue","stepValue","$2def4b4391eb108f8996e8ab33dd1f9e$var$NumberControllerBox","_NumberController","NumberControllerBox","__truncationSuspended","prevY","onFinish","onMouseDrag","diff","onMouseUp","attempted","decimals","tenTo","$2def4b4391eb108f8996e8ab33dd1f9e$var$map","i1","i2","o1","o2","$2def4b4391eb108f8996e8ab33dd1f9e$var$NumberControllerSlider","NumberControllerSlider","preventDefault","bgRect","__background","getBoundingClientRect","onTouchMove","touches","onTouchEnd","__foreground","pct","$2def4b4391eb108f8996e8ab33dd1f9e$var$FunctionController","FunctionController","text","__button","fire","$2def4b4391eb108f8996e8ab33dd1f9e$var$ColorController","ColorController","__color","__temp","__selector","__saturation_field","__field_knob","__field_knob_border","__hue_knob","__hue_field","__input_textShadow","onBlur","valueField","fieldDown","setSV","fieldUpSV","fieldDownH","setH","fieldUpH","toOriginal","fieldRect","_ref","padding","backgroundColor","boxShadow","border","borderRadius","zIndex","borderRight","marginRight","display","cursor","background","$2def4b4391eb108f8996e8ab33dd1f9e$var$linearGradient","cssText","outline","textAlign","fontWeight","textShadow","mismatch","flip","_flip","marginLeft","marginTop","toHexString","$2def4b4391eb108f8996e8ab33dd1f9e$var$vendors","vendor","$2def4b4391eb108f8996e8ab33dd1f9e$var$css","cssContent","indoc","doc","injected","head","getElementsByTagName","$2def4b4391eb108f8996e8ab33dd1f9e$var$saveDialogContents","$2def4b4391eb108f8996e8ab33dd1f9e$var$ControllerFactory","$2def4b4391eb108f8996e8ab33dd1f9e$var$requestAnimationFrame$1","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","$2def4b4391eb108f8996e8ab33dd1f9e$var$CenteredDiv","CenteredDiv","backgroundElement","opacity","WebkitTransition","transition","hide","webkitTransform","layout","innerWidth","innerHeight","css","$2def4b4391eb108f8996e8ab33dd1f9e$var$___$insertStyle","$2def4b4391eb108f8996e8ab33dd1f9e$var$DEFAULT_DEFAULT_PRESET_NAME","$2def4b4391eb108f8996e8ab33dd1f9e$var$SUPPORTS_LOCAL_STORAGE","localStorage","$2def4b4391eb108f8996e8ab33dd1f9e$var$SAVE_DIALOGUE","$2def4b4391eb108f8996e8ab33dd1f9e$var$autoPlaceVirgin","$2def4b4391eb108f8996e8ab33dd1f9e$var$autoPlaceContainer","$2def4b4391eb108f8996e8ab33dd1f9e$var$hide","$2def4b4391eb108f8996e8ab33dd1f9e$var$hideableGuis","$2def4b4391eb108f8996e8ab33dd1f9e$var$GUI","GUI","__ul","__folders","__controllers","__rememberedObjects","__rememberedObjectIndecesToControllers","__listening","closeOnTop","autoPlace","DEFAULT_WIDTH","resizable","hideable","load","preset","scrollable","useLocalStorage","getItem","$2def4b4391eb108f8996e8ab33dd1f9e$var$getLocalStorageHash","saveToLocalStorage","titleRow","getRoot","gui","__preset_select","$2def4b4391eb108f8996e8ab33dd1f9e$var$setPresetSelectIndex","revert","$2def4b4391eb108f8996e8ab33dd1f9e$var$setWidth","name","closed","CLASS_CLOSED","onResize","__closeButton","TEXT_OPEN","TEXT_CLOSED","setItem","CLASS_MAIN","savedGui","CLASS_CLOSE_BUTTON","CLASS_CLOSE_TOP","childNodes","CLASS_CLOSE_BOTTOM","titleRowName","createTextNode","$2def4b4391eb108f8996e8ab33dd1f9e$var$addRow","CLASS_AUTO_PLACE_CONTAINER","CLASS_AUTO_PLACE","__resizeHandler","onResizeDebounced","pmouseX","drag","dragStop","CLASS_DRAG","dragStart","__resize_handle","firstElementChild","$2def4b4391eb108f8996e8ab33dd1f9e$var$addResizeHandle","stringify","getSaveObject","saveToLocalStorageIfPossible","newDom","liBefore","li","$2def4b4391eb108f8996e8ab33dd1f9e$var$removeListeners","$2def4b4391eb108f8996e8ab33dd1f9e$var$markPresetModified","modified","$2def4b4391eb108f8996e8ab33dd1f9e$var$recallSavedValue","controller","matchedIndex","controllerMap","remembered","presetMap","$2def4b4391eb108f8996e8ab33dd1f9e$var$_add","factoryArgs","before","__li","container","CLASS_CONTROLLER_ROW","__gui","_options","nextElementSibling","_nextSibling","_name","listen","box","method","pc","pb","returned","oldName","wasListening","newController","stopPropagation","borderLeftColor","isModified","$2def4b4391eb108f8996e8ab33dd1f9e$var$augmentController","$2def4b4391eb108f8996e8ab33dd1f9e$var$addPresetOption","setSelected","$2def4b4391eb108f8996e8ab33dd1f9e$var$showHideExplain","explain","$2def4b4391eb108f8996e8ab33dd1f9e$var$addSaveMenu","div","__save_row","firstChild","gears","button","button2","button3","select","localStorageCheckBox","newConstructorTextArea","which","show","focus","save","presetName","prompt","saveAs","w","$2def4b4391eb108f8996e8ab33dd1f9e$var$getCurrentPreset","useInitialValues","savedValues","$2def4b4391eb108f8996e8ab33dd1f9e$var$updateDisplays","controllerArray","toggleHide","CLASS_TOO_TALL","_keydownHandler","add","addColor","destroy","subfolder","removeFolder","addFolder","newGuiParams","folders","folder","parentElement","open","close","node","offsetHeight","remember","$2def4b4391eb108f8996e8ab33dd1f9e$export$GUI","RgbQuant","colors","initColors","initDist","distIncr","hueGroups","satGroups","lumGroups","minHueCols","hueStats","HueStats","boxSize","boxPxls","palLocked","dithKern","dithSerp","dithDelta","histogram","idxrgb","palette","idxi32","i32idx","i32rgb","useCache","cacheFreq","reIndex","colorDist","distManhattan","distEuclidean","rgb","i32","numGroups","minCols","stats","num","cols","groupsFull","sample","img","getImageData","colorStats1D","buf32","colorStats2D","reduce","retType","buildPal","out32","dither","len","Uint32Array","nearestColor","Uint8Array","buffer","out","kernel","serpentine","kernels","FloydSteinberg","FalseFloydSteinberg","Stucki","Atkinson","Jarvis","Burkes","Sierra","TwoSierra","SierraLite","ds","dir","lni","xend","idx","r1","g1","b1","i32x","r2","g2","b2","er","eg","eb","end","x1","y1","lni2","idx2","r3","g3","b3","r4","g4","b4","noSort","histG","sorted","sort","sortedHashKeys","freq","pos","inject","reducePal","sortPal","cacheHistogram","tuples","prunePal","keep","j","uniques","pruned","nearestIndex","palLen","thold","memDist","pxi","pxj","i32j","dist","col","check","boxW","boxH","area","boxes","wid","hgt","w0","h0","wrem","hrem","yend","bxs","makeBoxes","effc","histL","bbox","i0","cnt","incr","iterBox","idxA","idxB","rgbA","rgbB","hslA","rgb2hsl","hslB","hueA","hueGroup","hueDiff","lumDiff","satDiff","hg","gr","typeOf","Pr","Pg","Pb","rgb2lum","sqrt","euclMax","rgb0","rgb1","rd","gd","bd","hue","segs","seg","haf","mid","ord","can","ctx","imgd","buf8","naturalWidth","naturalHeight","getContext","drawImage","canvas","$3ff87923012cc060cc1c71402579655e$exports","$ea278abadfd16e1a525939966beed426$var$getRandomColor","random","$ea278abadfd16e1a525939966beed426$export$brushes","paint","fillStyle","rx","ry","rot","PI","beginPath","ellipse","fill","$ea278abadfd16e1a525939966beed426$var$Round","$ea278abadfd16e1a525939966beed426$var$Pointillist","fillRect","$ea278abadfd16e1a525939966beed426$var$Box","$a75c6eb265b144c90ddb95f5204e4373$var$imageChoices","American Gothic","Mona Lisa","Bedroom In Arles","Persistence of Memory","The Shoemaker","Sharbat Gula","Larry Bird","$a75c6eb265b144c90ddb95f5204e4373$var$CANVAS_SIZE","$a75c6eb265b144c90ddb95f5204e4373$var$NO_PALETTE","$a75c6eb265b144c90ddb95f5204e4373$var$mypainter","play","animationId","guiState","brush","image","usePalette","alpha0","alpha1","numStrokesTried","numStrokesKept","similarity","Number","MAX_VALUE","image1","imageTemp","image2","statsEl","srcimg","Image","start","crossOrigin","src","sourcePixels","createImageData","iterate","setupGui","tgtw","tgth","hs","pctx","restartPainting","cancelAnimationFrame","clearRect","Round","Pointillist","Boxy","Strips","brushStroke","cvs","globalAlpha","testimage","newdiff","dr","dg","db","$2d86ea9ffbc865d15d60fb63c07fd222$var$c1","destCtx","globalCompositeOperation","updateStats","innerText"],"version":3,"file":"index.a1c4c813.js.map","sourceRoot":"/__parcel_source_root/"}